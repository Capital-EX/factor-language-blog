<!DOCTYPE html>
<html dir='ltr'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/55013136-widget_css_bundle.css' rel='stylesheet' type='text/css'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='../../favicon.ico' rel='icon' type='image/x-icon'/>
<link href='index.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="http://factor-language.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Factor: a practical stack language - RSS" href="http://factor-language.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="https://www.blogger.com/feeds/17087850/posts/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://factor-language.blogspot.com/2010/09/' property='og:url'/>
<meta content='Factor: a practical stack language' property='og:title'/>
<meta content='&lt;a href=&quot;http://factorcode.org/slava&quot;&gt;Slava Pestov&lt;/a&gt;&#39;s weblog, primarily about &lt;a href=&quot;http://factorcode.org&quot;&gt;Factor&lt;/a&gt;.' property='og:description'/>
<title>Factor: a practical stack language: September 2010</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Stretch Denim Light
Designer: Darren Delaye
URL:      www.DarrenDelaye.com
Date:     11 Jul 2006
-----------------------------------------------
*/
body {
background: #ffffff;
margin: 0;
padding: 0px;
font: x-small Verdana, Arial;
text-align: center;
color: #333333;
font-size/* */:/**/small;
font-size: /**/small;
}
a:link {
color: #336699;
}
a:visited {
color: #336699;
}
a img {
border-width: 0;
}
#outer-wrapper {
font: normal normal 100% Verdana, Arial, Sans-serif;;
}
/* Header
----------------------------------------------- */
#header-wrapper {
margin:0;
padding: 0;
background-color: #c4e1ff;
text-align: left;
}
#header {
margin: 0 2%;
background-color: #c4e1ff;
color: #003366;
padding: 0;
font: normal normal 210% Verdana, Arial, Sans-serif;;
position: relative;
}
h1.title {
padding-top: 38px;
margin: 0 1% .1em;
line-height: 1.2em;
font-size: 100%;
}
h1.title a, h1.title a:visited {
color: #003366;
text-decoration: none;
}
#header .description {
display: block;
margin: 0 1%;
padding: 0 0 40px;
line-height: 1.4em;
font-size: 50%;
}
/* Content
----------------------------------------------- */
.clear {
clear: both;
}
#content-wrapper {
margin: 0 2%;
padding: 0 0 15px;
text-align: left;
background-color: #ffffff;
border: 1px solid #ffffff;
border-top: 0;
}
#main-wrapper {
margin-left: 1%;
width: 64%;
float: left;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#sidebar-wrapper {
margin-right: 1%;
width: 29%;
float: right;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2, h3 {
margin: 0;
}
/* Posts
----------------------------------------------- */
.date-header {
margin: 1.5em 0 0;
font-weight: normal;
color: #999999;
font-size: 100%;
}
.post {
margin: 0 0 1.5em;
padding-bottom: 1.5em;
}
.post-title {
margin: 0;
padding: 0;
font-size: 125%;
font-weight: bold;
line-height: 1.1em;
}
.post-title a, .post-title a:visited, .post-title strong {
text-decoration: none;
color: #333333;
font-weight: bold;
}
.post div {
margin: 0 0 .75em;
line-height: 1.3em;
}
.post-footer {
margin: -.25em 0 0;
color: #333333;
font-size: 87%;
}
.post-footer .span {
margin-right: .3em;
}
.post img, table.tr-caption-container {
padding: 4px;
border: 1px solid #ffffff;
}
.tr-caption-container img {
border: none;
padding: 0;
}
.post blockquote {
margin: 1em 20px;
}
.post blockquote p {
margin: .75em 0;
}
/* Comments
----------------------------------------------- */
#comments h4 {
margin: 1em 0;
color: #999999;
}
#comments h4 strong {
font-size: 110%;
}
#comments-block {
margin: 1em 0 1.5em;
line-height: 1.3em;
}
#comments-block dt {
margin: .5em 0;
}
#comments-block dd {
margin: .25em 0 0;
}
#comments-block dd.comment-footer {
margin: -.25em 0 2em;
line-height: 1.4em;
font-size: 78%;
}
#comments-block dd p {
margin: 0 0 .75em;
}
.deleted-comment {
font-style:italic;
color:gray;
}
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/* Sidebar Content
----------------------------------------------- */
.sidebar h2 {
margin: 1.6em 0 .5em;
padding: 4px 5px;
background-color: #ffffff;
font-size: 100%;
color: #333333;
}
.sidebar ul {
margin: 0;
padding: 0;
list-style: none;
}
.sidebar li {
margin: 0;
padding-top: 0;
padding-right: 0;
padding-bottom: .5em;
padding-left: 15px;
text-indent: -15px;
line-height: 1.5em;
}
.sidebar {
color: #333333;
line-height:1.3em;
}
.sidebar .widget {
margin-bottom: 1em;
}
.sidebar .widget-content {
margin: 0 5px;
}
/* Profile
----------------------------------------------- */
.profile-img {
float: left;
margin-top: 0;
margin-right: 5px;
margin-bottom: 5px;
margin-left: 0;
padding: 4px;
border: 1px solid #ffffff;
}
.profile-data {
margin:0;
text-transform:uppercase;
letter-spacing:.1em;
font-weight: bold;
line-height: 1.6em;
font-size: 78%;
}
.profile-datablock {
margin:.5em 0 .5em;
}
.profile-textblock {
margin: 0.5em 0;
line-height: 1.6em;
}
/* Footer
----------------------------------------------- */
#footer {
clear: both;
text-align: center;
color: #333333;
}
#footer .widget {
margin:.5em;
padding-top: 20px;
font-size: 85%;
line-height: 1.5em;
text-align: left;
}
/** Page structure tweaks for layout editor wireframe */
body#layout #header {
width: 750px;
}

--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

</head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d17087850\x26blogName\x3dFactor:+a+practical+stack+language\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://factor-language.blogspot.com/search\x26blogLocale\x3den_US\x26v\x3d2\x26homepageUrl\x3dhttp://factor-language.blogspot.com/\x26vt\x3d1910212838315471456',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div id='outer-wrapper'><div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='index.html#main'>skip to main </a> |
      <a href='index.html#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='../../index.html'>
Factor: a practical stack language
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span><a href="http://factorcode.org/slava">Slava Pestov</a>'s weblog, primarily about <a href="http://factorcode.org">Factor</a>.</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol no-items section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Saturday, September 18, 2010</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='2482709033725182854' itemprop='postId'/>
<a name='2482709033725182854'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='factor-094-now-available.html'>Factor 0.94 now available</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-2482709033725182854' itemprop='description articleBody'>
<p>Factor 0.94 is now available from the <a href="http://factorcode.org">Factor website</a>, five months after the previous release, Factor 0.93. Binaries are provided for 10 platforms.</p> <p>As usual, contributors did most of the work. Thanks to Daniel Ehrenberg, Dmitry Shubin, Doug Coleman, Erik Charlebois, Joe Groff, John Benediktsson, Jose A. Ortega Ruiz, Niklas Waern, Samuel Tardieu, Sascha Matzke and everyone else who helped out this time around!</p> <h3>Incompatible changes:</h3> <ul> <li>The PowerPC architecture is no longer supported. (Slava Pestov)</li> <li>The <a href="http://docs.factorcode.org/content/word-require-when%2Cvocabs.loader.html">require-when</a> word now supports dependencies on multiple vocabularies. (Daniel Ehrenberg)</li> <li>The <code>C-ENUM:</code> word in the C library interface has been replaced with <a href="http://docs.factorcode.org/content/word-ENUM__colon__%2Calien.syntax.html">ENUM:</a>, a much improved word for defining type-safe enumerations. (Erik Charlebois, Joe Groff)</li> <li>Tuple slot setter words with stack effect <code>( value object -- )</code> are now named <code>foo&lt;&lt;</code> instead of <code>(>>foo)</code>. Most code is unaffected since it uses the <code>>>foo</code> form. (Slava Pestov)</li> <li>The older <code>system-micros</code> word, which returned microseconds since the Unix epoch as an integer, has been removed. For a while, the recommended way to get the current time has been to call the <code>now</code> word from the <a href="http://docs.factorcode.org/content/vocab-calendar.html">calendar</a> vocabulary, which returned a <a href="http://docs.factorcode.org/content/word-timestamp%2Ccalendar.html">timestamp</a> instance. (Doug Coleman)</li> <li>A few sequence-related words were moved from the <a href="http://docs.factorcode.org/content/vocab-generalizations.html">generalizations</a> vocabulary to <a href="http://docs.factorcode.org/content/vocab-sequences.generalizations.html">sequences.generalizations</a>. (Slava Pestov)</li> <li>The <code>alarms</code> vocabulary has been renamed to <a href="http://docs.factorcode.org/content/vocab-timers.html">timers</a> to better explain its true purpose, with improved timing accuracy and robustness. (Doug Coleman)</li> <li><a href="http://docs.factorcode.org/content/vocab-cocoa.subclassing.html">cocoa.subclassing</a>: the syntax for defining new Objective-C classes has been changed to improve readability. (Slava Pestov)</li> <li><a href="http://docs.factorcode.org/content/vocab-io.streams.limited.html">io.streams.limited</a>: the ability to throw errors on EOF was extracted from limited streams, and limited streams simplified as a result. Throwing on EOF is now implemented by the <a href="http://docs.factorcode.org/content/vocab-io.streams.throwing.html">io.streams.throwing</a> vocabulary. (Doug Coleman)</li> </ul> <h3>New libraries:</h3> <ul> <li><a href="http://docs.factorcode.org/content/vocab-boyer-moore.html">boyer-moore</a>: efficient text search algorithm (Dmitry Shubin)</li> <li><a href="http://docs.factorcode.org/content/vocab-checksums.internet.html">checksums.internet</a>: implementation of checksum algorithm used by ICMP for the <a href="http://docs.factorcode.org/content/vocab-checksums.html">checksums</a> framework (John Benediktsson)</li> <li><a href="http://docs.factorcode.org/content/vocab-gdbm.html">gdbm</a>: disk-based hash library binding (Dmitry Shubin)</li> <li><a href="http://docs.factorcode.org/content/vocab-io.encodings.detect.html">io.encodings.detect</a>: binary file/text encoding detection heuristics from jEdit (Joe Groff)</li> <li><a href="http://docs.factorcode.org/content/vocab-javascriptcore.html">javascriptcore</a>: FFI to the WebKit JavaScript engine (Doug Coleman)</li> <li><a href="http://docs.factorcode.org/content/vocab-lua.html">lua</a>: FFI to the Lua scripting language (Erik Charlebois)</li> <li><a href="http://docs.factorcode.org/content/vocab-oauth.html">oauth</a>: minimal implementation of client-side OAuth (Slava Pestov)</li> <li><a href="http://docs.factorcode.org/content/vocab-sequences.unrolled.html">sequences.unrolled</a>: efficient unrolled loops with constant iteration count (Joe Groff)</li> </ul> <h3>Improved libraries:</h3> <ul> <li><a href="http://docs.factorcode.org/content/vocab-cuda.html">cuda</a>: various improvements (Joe Groff, Doug Coleman)</li> <li><a href="http://docs.factorcode.org/content/vocab-game.input.html">game.input</a>: now uses XInput2 on X11 (Niklas Waern)</li> <li><a href="http://docs.factorcode.org/content/vocab-gpu.render.html">gpu.render</a>, <a href="http://docs.factorcode.org/content/vocab-gpu.buffers.html">gpu.buffers</a>: various improvements (Joe Groff)</li> <li><a href="http://docs.factorcode.org/content/vocab-math.combinatorics.html">math.combinatorics</a>: various improvements (John Benediktsson)</li> <li><a href="http://docs.factorcode.org/content/vocab-math.primes.html">math.primes</a>: various improvements (Samuel Tardieu)</li> <li><a href="http://docs.factorcode.org/content/vocab-math.vectors.simd.cords.html">math.vectors.simd.cords</a>: compound "256-bit" SIMD types now support the full set of SIMD operations (Joe Groff)</li> <li><a href="http://docs.factorcode.org/content/vocab-mongodb.html">mongodb</a>: various improvements (Sascha Matzke)</li> <li><a href="http://docs.factorcode.org/content/vocab-twitter.html">twitter</a>: now uses OAuth as required by Twitter (Slava Pestov)</li> <li><a href="http://docs.factorcode.org/content/vocab-unix.users.html">unix.users,</a> <a href="http://docs.factorcode.org/content/vocab-unix.groups.html">unix.groups</a>: various improvements (Doug Coleman)</li> </ul> <h3>Compiler improvements:</h3> <ul> <li>Improved instruction selection, copy propagation, representation selection, and register allocation; details in a <a href="../05/collection-of-small-compiler.html">blog post</a>. (Slava Pestov) <li>An instruction scheduling pass now runs prior to register allocation, intended to reduce register pressure by moving uses closer to definitions; details in a <a href="http://useless-factor.blogspot.com/2010/02/instruction-scheduling-for-register.html">blog post</a>. (Daniel Ehrenberg)</li> <li>The code generation for the C library interface has been revamped; details in a <a href="../07/overhauling-factors-c-library-interface.html">blog post</a>. (Slava Pestov) <li>Something similar to what C++ and C# programmers refer to as "value types"; binary data can now be allocated on the call stack, and passed to C functions like any other pointer. The <a href="http://docs.factorcode.org/content/word-with-out-parameters%2Calien.data.html">with-out-parameters</a> combinator replaces tricky code for allocating and juggling multiple temporary byte arrays used as out parameters for C function calls, making this idiom easier to read and more efficient. The <a href="http://docs.factorcode.org/content/word-with-scoped-allocation,alien.data.html">with-scoped-allocation</a> combinator presents a more general, lower-level interface. (Slava Pestov)</li> <li>The compiler can now use the x87 floating point unit on older CPUs where SSE2 is not available. However, this is not recommended, because the build farm does not test Factor (or build any binaries) in x87 mode, so this support can break at any time. To use x87 code generation, you must download the source code and bootstrap Factor yourself, on a CPU without SSE2. (Slava Pestov)</li> </ul> <h3>Miscellaneous improvements:</h3> <ul> <li><code>fuel</code>: Factor's Ultimate Emacs Library has seen many improvements, and also some keyboard shortcuts have changed; see the <a href="index.html">README</a>. (Erik Charlebois, Dmitry Shubin, Jose A. Ortega Ruiz)</li> <li>A new <code>factor.cmd</code> script is now included in the <code>build-support</code> directory, to automate the update/build/bootstrap cycle for those who build from source. Its functionality is a subset of the <code>factor.sh</code> script for Unix. (Joe Groff)</li> <li>The default set of icons shipped in <code>misc</code> has been tweaked, with better contrast and improved appearance when scaled down. (Joe Groff)</li> </ul>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2010/09/factor-094-now-available.html' itemprop='url'/>
<a class='timestamp-link' href='factor-094-now-available.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2010-09-18T23:40:00-04:00'>11:40 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=2482709033725182854' onclick=''>
No comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=2482709033725182854' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=2482709033725182854&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=2482709033725182854&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=2482709033725182854&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=2482709033725182854&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=2482709033725182854&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=2482709033725182854&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Saturday, September 11, 2010</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='3219921363760945818' itemprop='postId'/>
<a name='3219921363760945818'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='overview-of-factors-io-library.html'>An overview of Factor's I/O library</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-3219921363760945818' itemprop='description articleBody'>
<p>Factor has grown a very powerful and high-level I/O library over the years, however it is easy to get lost in the forest of reference documentation surrounding the <a href="http://docs.factorcode.org/content/vocab-io.html">io</a> vocabulary hierarchy. In this blog post I'm attempting to give an overview of the functionality available, with some easy-to-digest examples, along with links for futher reading. I will also touch upon some common themes that come up throughout the library, such as encoding support, timeouts, and uses for dynamically-scoped variables.</p> <p>Factor's I/O library is the work of many contributors over the years. Implementing FFI bindings to native I/O APIs, developing high-level abstractions on top, and making the whole thing cross-platform takes many people. In particular <a href="http://docs.factorcode.org/content/author-Doug%20Coleman.html">Doug Coleman</a> did a lot of heavy lifting early on for the Windows port, and also implemented several new cross-platform features such as file system metadata and memory mapped files.</p> <p>Our I/O library is competitive with Python's APIs and Java's upcoming NIO2 in breadth of functionality. I like to think the design is quite a bit cleaner too, because instead of being a thin wrapper over POSIX we try to come up with clear and conherent APIs that make sense on both Windows and Unix.</p> <h3>First example: converting a text file from MacRoman to UTF8</h3> <p>The <a href="http://docs.factorcode.org/content/vocab-io.files.html">io.files</a> vocabulary defines words for reading and writing files. It supports two modes of operation in a pretty standard fashion:</p> <ul> <li>Stream-based: <a href="http://docs.factorcode.org/content/word-with-file-reader,io.files.html">with-file-reader</a>, <a href="http://docs.factorcode.org/content/word-with-file-writer,io.files.html">with-file-writer</a></li> <li>Entire file: <a href="http://docs.factorcode.org/content/word-file-contents,io.files.html">file-contents</a>, <a href="http://docs.factorcode.org/content/word-set-file-contents,io.files.html">set-file-contents</a>, <a href="http://docs.factorcode.org/content/word-file-lines,io.files.html">file-lines</a>, <a href="http://docs.factorcode.org/content/word-set-file-lines,io.files.html">set-file-lines</a></li> </ul> <p>What makes Factor's file I/O interesting is that it takes advantage of pervasive support for I/O encoding. In Factor, a string is not a sequence of bytes; it is a sequence of Unicode code points. When reading and writing strings on external resources, which only consist of bytes, an encoding parameter is given to specify the conversion from strings to byte arrays.</p> <p>Let's convert <code>foo.txt</code> from MacRoman, an older encoding primarily used by classic Mac OS, to UTF8:</p> <pre>USING: io.encodings.8-bit.mac-roman io.encodings.utf8 io.files ;<br /><br />"foo.txt" mac-roman file-contents<br />"foo.txt" utf8 set-file-contents</pre> <p>This is a very simple and concise implementation but it has the downside that the entire file is read into memory. For most small text files this does not matter, but if efficiency is a concern then we can do the conversion a line at a time:</p> <pre>USING: io io.encodings.8-bit.mac-roman io.encodings.utf8<br />io.files ;<br /><br />"out.txt" utf8 [<br />    "in.txt" mac-roman [<br />        [ print ] each-line<br />    ] with-file-reader<br />] with-file-writer</pre> <h3>Converting a directory full of files from MacRoman to UTF8</h3> <p>The <a href="http://docs.factorcode.org/content/vocab-io.files.html">io.files</a> vocabulary defines words for listing and modifying directories. Let's make the above example more interesting by performing the conversion on a directory full of files:</p> <pre>USING: io.directories io.encodings.8-bit.mac-roman<br />io.encodings.utf8 io.files ;<br /><br />: convert-directory ( path -- )<br />    [<br />        [<br />            [ mac-roman file-contents ] keep<br />            utf8 set-file-contents<br />        ] each<br />    ] with-directory-files ;</pre> <h3>An aside: generalizing the "current working directory"</h3> <p>If you run the following, you will see that <code>with-directory-files</code> returns relative, and not absolute, file names:</p> <pre>"/path/to/some/directory"<br />[ [ print ] each ] with-directory-files</pre> <p>So the question is, how did <code>file-contents</code> above know what directory to look for files in? The answer is that in addition to calling the quotation with the directory's contents, the <code>with-directory-files</code> word also rebinds the <a href="http://docs.factorcode.org/content/word-current-directory,io.pathnames.html">current-directory</a> dynamic variable.</p> <p>This directory is the Factor equivalent of the familiar Unix notion of "current working directory". It generalizes the Unix feature by making it dynamically-scoped; within the quotation passed to the <code>with-directory</code> combinator, relative paths are resolved relative to that directory, but other coroutines executing at the time, or code after the quotation, is unaffected. This functionality is implemented entirely at the library level; all pathname strings are "normalized" with the <code>normalize-pathname</code> word before being handed off to the operating system.</p> <p>When calling a shell command with <code>io.launcher</code>, the child process is run from the Factor <code>current-directory</code> so relative pathnames passed on the command line will just work. However, when making C FFI calls which take pathnames, you pass in absolute paths only, or normalize the path with <code>normalize-path</code> first, otherwise the C code wlll search for it in the wrong place.</p> <h3>Checking free disk space</h3> <p>The <a href="http://docs.factorcode.org/content/vocab-io.files.info.html">io.files.info</a> vocabulary defines two words which return tuples containing information about a file, and the file system containing the file, respectively: <ul> <li><a href="http://docs.factorcode.org/content/word-file-info,io.files.info.html">file-info</a></li> <li><a href="http://docs.factorcode.org/content/word-file-system-info,io.files.info.html">file-system-info</a></li> </ul> <p>Let's say your application needs to install some files in the user's home directory, but instead of failing half-way through in the event that there is insufficient space, you'd rather display a friendly error message upfront:</p> <pre>ERROR: buy-a-new-disk ;<br /><br />: gb ( m -- n ) 30 2^ * ;<br /><br />: check-space ( -- )<br />    home file-system-info free-space>> 10 gb <<br />    [ buy-a-new-disk ] when ;</pre> <p>Now if there is less than 10gb available, the <code>check-space</code> word will throw a <code>buy-a-new-disk</code> error.</p> <p>The <code>file-system-info</code> word reports a bunch of other info. There is a Factor implementation of the Unix <code>df</code> command in the <a href="http://docs.factorcode.org/content/vocab-tools.files.html">tools.files</a> vocabulary: <pre>( scratchpad ) file-systems.<br />+device-name+ +available-space+ +free-space+ +used-space+ +total-space+ +percent-used+ +mount-point+<br />/dev/disk0s2  15955816448       16217960448  183487713280 199705673728  91             /<br />fdesc         0                 0            1024         1024          100            /dev<br />fdesc         0                 0            1024         1024          100            /dev<br />map -hosts    0                 0            0            0             0              /net<br />map auto_home 0                 0            0            0             0              /home<br />/dev/disk1s2  15922262016       15922262016  383489052672 399411314688  96             /Users/slava</pre> <p>Doug has two blog posts about these features, <a href="http://code-factor.blogspot.com/2009/01/files-and-file-systems-in-factor-part-1.html">part 1</a> and <a href="http://code-factor.blogspot.com/2009/01/files-and-file-systems-in-factor-part-2.html">part 2</a>.</p> <h3>Unix only: symbolic links</h3> <p>Factor knows about symbolic links on Unix. The <a href="http://docs.factorcode.org/content/vocab-io.files.links.html">io.files.links</a> vocabulary defines a pair of words, <a href="http://docs.factorcode.org/content/word-make-link,io.files.links.html">make-link</a> and <a href="http://docs.factorcode.org/content/word-make-hard-link,io.files.links.html">make-hard-link</a>. The <a href="http://docs.factorcode.org/content/word-link-info,io.files.info.html">link-info</a> word is like <a href="http://docs.factorcode.org/content/word-file-info,io.files.info.html">file-info</a> except it doesn't follow symbolic links. Finally, the <a href="http://docs.factorcode.org/content/vocab-io.directories.hierarchy.html">directory hierarchy traversal words</a> don't follow links, so a link cycle or bogus link to / somewhere won't break everything.</p> <h3>File system monitoring</h3> <p>The <a href="http://docs.factorcode.org/content/vocab-io.monitors.html">io.monitors</a> vocabulary implements real-time file and directory change monitoring. Unfortunately at this point in time, it is only supported on Windows, Linux and Mac. Neither one of FreeBSD and OpenBSD exposes the necessary information to user-space.</p> <p>Here is an example for watching a directory for changes, and logging them:</p> <pre>USE: io.monitors<br /><br />: watch-loop ( monitor -- )<br />    dup next-change path>> print flush watch-loop ;<br /><br />: watch-directory ( path -- )<br />    [ t [ watch-loop ] with-monitor ] with-monitors ;</pre> <p>Try pasting the above code into a Factor listener window, and then run <code>home watch-directory</code>. Every time a file in your home directory is modified, its full pathname will be printed in the listener.</p> <p>Java will only begin to support symbolic links and directory monitoring in the upcoming JDK7 release.</p> <h3>Memory mapped files</h3> <p>The <a href="http://docs.factorcode.org/content/vocab-io.mmap.html">io.mmap</a> vocabulary defines support for working with memory-mapped files. The highest-level and easiest to use interface is the <a href="http://docs.factorcode.org/content/word-with-mapped-array,io.mmap.html">with-mapped-array</a> combinator. It takes a file name, a <a href="http://docs.factorcode.org/content/article-c-types-specs.html">C type</a>, and a quotation. The quotation can perform generic sequence operations on the mapped file.</p> <p>Here is an example which reverses each group of 4 bytes:</p> <pre>USING: alien.c-types grouping io.mmap sequences<br />specialized-arrays ;<br />SPECIALIZED-ARRAY: char<br /><br />"mydata.dat" char [<br />    4 &lt;sliced-groups><br />    [ reverse! drop ] each<br />] with-mapped-array</pre> <p>The <a href="http://docs.factorcode.org/content/word-__lt__sliced-groups__gt__%2Cgrouping.html">&lt;sliced-groups></a> word returns a view of an underlying sequence, grouped into n-element subsequences. Mutating one of these subsequences in-place mutates the underlying sequence, which in our case is a mapped view of a file.</p> <p>A more efficient implementation of the above is also possible, by mapping in the file as an <code>int</code> array and then performing bitwise arithmetic on the elements.</p> <h3>Launching processes</h3> <p>Factor's <a href="http://docs.factorcode.org/content/vocab-io.launcher.html">io.launcher</a> vocabulary was originally developed for use by the <a href="making-factors-continuous-build-system.html">build farm</a>. The build farm needs to launch processes with precise control over I/O redirection and timeouts, and so a rich set of cross-platform functionality was born.</p> <p>The central concept in the library is the <code>process</code>, tuple, constructed by calling <code>&lt;process></code>. Various slots of the process tuple can be filled in to specify the command line, environment variables, redirection, and so on. Then the process can be run in various ways, running in the foreground, in the background, or with input and output attached to Factor streams.</p> <p>The launcher's I/O redirection is very flexible. If you don't touch the redirection slots in a process tuple, the subprocess will just inherit the current standard input and output. You can specify a file name to read or write from, a file name to append to, or even supply a pipe object, constructed from the <a href="http://docs.factorcode.org/content/vocab-io.pipes.html">io.pipes</a> vocabulary.</p> <pre>&lt;process><br />    "rotate-logs" >>command<br />    +closed+ >>stdin<br />    "out.txt" >>stdout<br />    "error.log" &lt;appender> >>stderr</pre> <p>It is possible to specify a timeout when running a process:</p> <pre>&lt;process><br />    { "ssh" "myhost" "-l" "jane" "do-calculation" } >>command<br />    15 minutes >>timeout<br />    "results.txt" >>stdout<br />run-process</pre> The process will be killed if it runs for longer than the timeout period. Many other features are supported; setting environment variables, setting process priority, and so on. The <a href="http://docs.factorcode.org/content/vocab-io.launcher.html">io.launcher</a> vocabulary has all the details. <p>Support for timeouts is a cross-cutting concern that touches many ports of the I/O API. This support is consolidated in the <a href="http://docs.factorcode.org/content/vocab-io.timeouts.html">io.timeouts</a> vocabulary. The <code>set-timeout</code> generic word is supported by all external resources which provide interruptible blocking operations.</p> <p>Timeouts are implemented on top of our <a href="http://code-factor.blogspot.com/2009/11/monotonic-timers.html">monotonic timer support</a>; changing your system clock while Factor is running won't screw with active network connections.</p> <h3>Unix only: file ownership and permissions</h3> <p>The <code>io.files.unix</code> vocabulary defines words for reading and writing file ownership and permissions. Using this vocabulary, we can write a shell script to a file, make it executable, and run it. An essential component of any multi-language quine:</p> <pre>USING: io.encodings.ascii io.files io.files.info.unix<br />io.launcher ;<br /><br />"""<br />#!/bin/sh<br />echo "Hello, polyglot"<br />""" "script.sh" ascii set-file-contents<br />OCT: 755 "script.sh" set-file-permissions<br />"./script.sh" run-process</pre> <p>There are even more Unix-specific words in the <a href="http://docs.factorcode.org/content/vocab-unix.users.html">unix.users</a> and <a href="http://docs.factorcode.org/content/vocab-unix.groups.html">unix.groups</a> vocabularies. Using these words enables listing all users on the system, converting user names to UIDs and back, and even <code>setuid</code> and <code>setgid</code>.</p> <h3>Networking</h3> <p>Factor's <a href="http://docs.factorcode.org/content/vocab-io.sockets.html">io.sockets</a> vocabulary supports stream and packet-based networking.</p> <ul> <li>Stream-based: <a href="http://docs.factorcode.org/content/word-with-client,io.sockets.html">with-client</a>, <a href="http://docs.factorcode.org/content/word-__lt__server__gt__,io.sockets.html">&lt;server></a>, <a href="http://docs.factorcode.org/content/word-accept,io.sockets.html">accept</a></li> <li>Packet-based: <a href="http://docs.factorcode.org/content/word-__lt__datagram__gt__,io.sockets.html">&lt;datagram></a>, <a href="http://docs.factorcode.org/content/word-send%2Cio.sockets.html">send</a>, <a href="http://docs.factorcode.org/content/word-receive%2Cio.sockets.html">receive</a></li> </ul> <p>Network addresses are specified in a flexible manner. Specific classes exist for IPv4, IPv6 and Unix domain socket addressing. When a network socket is constructed, that endpoint is bound to a given address specifier.</p> <p>Connecting to <code>http://www.apple.com</code>, sending a GET request, and reading the result:</p> <pre>USING: io io.encodings.utf8 io.sockets ;<br /><br />"www.apple.com" 80 &lt;inet> utf8 [<br />    """GET / HTTP/1.1\r<br />host: www.apple.com\r<br />connection: close\r<br />\r<br />""" write flush<br />    contents<br />] with-client<br />print</pre> <p>SSL support is almost transparent; the only difference is that the address specifier is wrapped in <code>&lt;secure></code>:</p> <pre>USING: io io.encodings.utf8 io.sockets<br />io.sockets.secure ;<br /><br />"www.cia.gov" 443 &lt;inet> &lt;secure> utf8 [<br />    """GET / HTTP/1.1\r<br />host: www.cia.gov\r<br />connection: close\r<br />\r<br />""" write flush<br />    contents<br />] with-client<br />print</pre> <p>For details, see the <a href="http://docs.factorcode.org/content/vocab-io.sockets.secure.html">io.sockets.secure</a> documentation, and my <a href="../../2008/05/ssltls-support-added.html">blog post about SSL in Factor.</a>.</p> <p>Of course you'd never send HTTP requests directly using sockets; instead you'd use the <a href="http://docs.factorcode.org/content/vocab-http.client.html">http.client</a> vocabulary.</p> <h3>Network servers</h3> <p>Factor's <a href="http://docs.factorcode.org/content/vocab-io.servers.connection.html">io.servers.connection</a> vocabulary is so cool, that a couple of years back I made a <a href="http://factor.blip.tv/file/1316060/">screencast about it</a>. Nowadays the sample application developed in that screencast is in the <a href="http://gitweb.factorcode.org/gitweb.cgi?p=factor/.git;a=blob;f=extra/time-server/time-server.factor;hb=HEAD">extra/time-server</a>; the implementation is very concise and elegant.</p> <h3>Under the hood</h3> <p>All of this functionality is implemented in pure Factor code on top of our excellent <a href="http://docs.factorcode.org/content/article-alien.html">C library interface</a> and extensive bindings to POSIX and Win32 in the <a href="http://docs.factorcode.org/content/vocab-unix.html">unix</a> and <a href="http://docs.factorcode.org/content/vocab-windows.html">windows</a> vocabulary hierarchies, respectively.</p> <p>As much as possible, I/O is performed with non-blocking operations; synchronous reads and writes only suspend the current coroutine and switch to the next runnable one rather than hanging the entire VM. I recently <a href="../04/switching-call-stacks-on-different.html">rewrote the coroutines implementation to use direct context switching rather than continuations</a>.</p> <p>Co-ordination and scheduling of coroutines is handled with a series of <a href="../../2008/02/some-changes-to-threads.html">simple concurrency abstractions</a>.</p>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2010/09/overview-of-factors-io-library.html' itemprop='url'/>
<a class='timestamp-link' href='overview-of-factors-io-library.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2010-09-11T22:23:00-04:00'>10:23 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=3219921363760945818' onclick=''>
5 comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=3219921363760945818' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=3219921363760945818&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3219921363760945818&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3219921363760945818&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3219921363760945818&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3219921363760945818&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3219921363760945818&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Sunday, September 05, 2010</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='3585300047922066265' itemprop='postId'/>
<a name='3585300047922066265'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='making-factors-continuous-build-system.html'>Making Factor's continuous build system more robust</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-3585300047922066265' itemprop='description articleBody'>
<p>I've done some work on <a href="http://concatenative.org/wiki/view/Factor/Build%20farm">Factor's continuous build system</a> over the weekend to make it more robust in the face of failure, with improved error reporting and less manual intervention required to fix problems when they come up. The current build system is called "mason", because it is based on an earlier build system named "builder" that was written by Eduardo Cavazos. Every binary package you download from <a href="http://factorcode.org">factorcode.org</a> was built, tested and benchmarked by mason.</p> <h3>Checking for disk space</h3> <p>Every once in a while build machines run out of disk space. This is a condition that Git doesn't handle very gracefully; if a git pull fails half way through, it leaves the repository in an inconsistent state. Instead of failing during source code checkout or testing, mason now checks disk usage before attempting a build. If less than 1 Gb is free, it sends out a warning e-mail and takes no further action. Disk usage is also now part of every build report; for example, take a look at the <a href="http://builds.factorcode.org/report?os=macosx&cpu=x86.32">latest Mac OS X report</a>. Finally, mason does a better job of cleaning up after itself when builds fail, reducing the rate of disk waste overall.</p> <p>I must say the disk space check was very easy to implement using Doug Coleman's excellent cross-platform <code>file-system-info</code> library. Factor's I/O libraries are top-notch and everything works as expected across all of the platforms we run on.</p> <h3>Git repository corruption</h3> <p>Git is not 100% reliable, and sometimes repositories will end up in a funny state. One cause is when the disk fills up in the middle of a pull, but it seems to happen in other cases too. For example, just a few days ago, our 64-bit Windows build machine started failing builds with the following error: <pre>From git://factorcode.org/git/factor<br /> * branch            master     -> FETCH_HEAD<br />Updating d386ea7..eece1e3<br /><br />error: Entry 'basis/io/sockets/windows/windows.factor' not uptodate. Cannot merge.</pre> <p>Of course nobody actually edits files in the repository in question, its a clone of the official repo that gets updated every 5 minutes. Why git messed up here I have no clue, but instead of expecting software to be perfect, we can design for failure.</p> <p>If a pull fails with a merge error, or if the working copy somehow ends up containing modified or untracked files, mason deletes the repository and clones it again from scratch, instead of just falling over and requiring manual intervention.</p> <h3>Error e-mail throttling</h3> <p>Any time mason encounters an error, such as not being able to pull from the Factor Git repository, disk space exhaustion, or intermittent network failure, it sends out an e-mail to <a href="http://sourceforge.net/mailarchive/forum.php?forum_name=factor-builds">Factor-builds</a>. Since it checks for new code every 5 minutes, this can get very annoying if there is a problem with the machine and nobody is able to fix it immediately; the <a href="http://sourceforge.net/mailarchive/forum.php?forum_name=factor-builds">Factor-builds list</a> would get spammed with hundreds of duplicate messages. Now, mason uses a heuristic to limit the number of error e-mails sent out. If two errors are sent within twenty minutes of each other, no further errors are sent for another 6 hours.</p> <h3>More robust new code check</h3> <p>Previously mason would initiate a build if a git pull had pulled in patches. This was insufficient though, because if a build was killed half way through, for example due to power failure or machine reboot, it would not re-attempt a build when it came back up until new patches were pushed. Now mason compares the latest git revision with the last one that was actually built to completion (whether or not there were errors).</p> <h3>Build system dashboard</h3> <p>I've put together <a href="http://builds.factorcode.org/dashboard">a simple dashboard page</a> showing build system status. Sometimes VMs will crash (FreeBSD is particularly flaky when running under VirtualBox, for example) and we don't always notice that a VM is down until several days after, when no builds are being uploaded. Since mason now sends out heartbeats every 5 minutes to a central server, it was easy to put together a dashboard showing which machines have not sent any heartbeats for a while. These machines are likely to be down. The dashboard also allows a build to be forced even if no new code was pushed to the repository; this is useful to test things out after changing machine configuration.</p> <p>The dashboard nicely complements my earlier work on <a href="../../2009/05/live-status-display-for-factors-build.html">live status display</a> for the build farm.</p> <h3>Conclusion</h3> <p>I think mason is one of the most advanced continuous integration systems among open source language implementations, nevermind the less mainstream ones such as Factor. And thanks to Factor's advanced libraries, it is only 1600 lines of code. Here is a selection of the functionality from Factor's standard library used by mason:</p> <ul> <li><a href="http://docs.factorcode.org/content/vocab-io.files.info.html">io.files.info</a> - checking disk usage</li> <li><a href="http://docs.factorcode.org/content/vocab-io.launcher.html">io.launcher</a> - running processes, such as git, make, zip, tar, ssh, and of course the actual Factor instance being tested</li> <li><a href="http://docs.factorcode.org/content/vocab-io.timeouts.html">io.timeouts</a> - timeouts on network operations and child processes are invaluable; Factor's consistent and widely-used timeout API makes it easy</li> <li><a href="http://docs.factorcode.org/content/vocab-http.client.html">http.client</a> - downloading boot images, making POST requests to builds.factorcode.org for the live status display feature</li> <li><a href="http://docs.factorcode.org/content/vocab-smtp.html">smtp</a> - sending build report e-mails</li> <li><a href="http://docs.factorcode.org/content/vocab-twitter.html">twitter</a> - Tweeting binary upload notifications</li><li><a href="http://docs.factorcode.org/content/vocab-oauth.html">oauth</a> - yes, Factor has a library to support the feared OAuth. Everyone complains about how hard OAuth is, but if you have easy to use libraries for HMAC, SHA1 and HTTP then it's no big deal at all.<li><a href="http://docs.factorcode.org/content/vocab-xml.syntax.html">xml.syntax</a> - constructing HTML-formatted build reports using XML literal syntax</li> </ul>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2010/09/making-factors-continuous-build-system.html' itemprop='url'/>
<a class='timestamp-link' href='making-factors-continuous-build-system.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2010-09-05T20:50:00-04:00'>8:50 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=3585300047922066265' onclick=''>
No comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=3585300047922066265' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=3585300047922066265&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3585300047922066265&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3585300047922066265&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3585300047922066265&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3585300047922066265&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=3585300047922066265&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Friday, September 03, 2010</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='5808076548128250184' itemprop='postId'/>
<a name='5808076548128250184'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='two-things-every-unix-developer-should.html'>Two things every Unix developer should know</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-5808076548128250184' itemprop='description articleBody'>
<p>Unix programming can be tricky. There are many subtleties many developers are not aware of. In this post, I will describe just two of them... my favorite Unix quirks, if you will.</p> <h3>Interruptible system calls</h3> <p>On Unix, any system call which blocks can potentially fail with an errno of <code>EINTR</code>, which indicates that the caller must retry the system call. The <code>EINTR</code> error can be raised at any time for any reason, so essentially <i>every</i> I/O operation on a Unix system must be prepared to handle this error properly. Surprisingly to some, this includes the C standard library functions such as <code>fread()</code>, <code>fwrite()</code>, and so on.</p> <p>For example, if you are writing a network server, then most of the time, you want to ignore the <code>SIGPIPE</code> signal which is raised when the client closes its end of a socket. However, this ignored signal can cause some pending I/O in the server to return <code>EINTR</code>.</p> <p>A commonly-held belief is that setting the <code>SA_RESTART</code> flag with the <code>sigaction()</code> system call means that if that signal is delivered, system calls are restarted for you and <code>EINTR</code> doesn't need to be handled. Unfortunately this is not true. The reason is that certain signals are unmaskable. For instance, on Mac OS X, if your process is blocking reading on standard input, and the user suspends the program by sending it <code>SIGSTOP</code> (usually by pressing ^Z in the terminal), then upon resumption, your <code>read()</code> call will immediately fail with <code>EINTR</code>.</p> <p>Don't believe me? The Mac OS X <code>cat</code> program is not actually interrupt-safe, and has this bug. Run <code>cat</code> with no arguments in a terminal, press ^Z, then type <code>%1</code>, and you'll get an error from cat!</p> <pre>$ cat<br />^Z<br />[1]+  Stopped                 cat<br />$ %1<br />cat<br />cat: stdin: Interrupted system call<br />$</pre> <p>As far as I'm aware, Factor properly handles interruptible system calls, and has for a while now, thanks to <a href="http://code-factor.blogspot.com">Doug Coleman</a> explaining the issue to me 4 years ago. Not having to deal with crap like this (not to mention being able to write cross-platform code that runs on both Unix and Windows) is one of the advantages of using a high-level language like Factor or Java over C.</p> <h3>Subprocesses inherit semi-random things from the parent process</h3> <p>When you <code>fork()</code> your process, various things are copied from the parent to the child; environment variables, file descriptors, the ignored signal mask, and so on. Less obvious is the fact that <code>exec()</code> doesn't reset everything. If shared file descriptors such as stdin and stdout were set to non-blocking in the parent, the child will start with these descriptors non-blocking also, which will most likely break most programs. <a href="../../2008/07/dont-set-shared-file-descriptors-to-non.html">I've blogged about this problem before</a>.</p> <p>A similar issue is that if you elect to ignore certain signals with the <code>SIG_IGN</code> action using <code>sigaction()</code>, then subprocesses will inherit this behavior. Again, this can break processes. Until yesterday, Factor would ignore <code>SIGPIPE</code> using this mechanism, and child processes spawned with the <code>io.launcher</code> vocabulary that expected to receive <code>SIGPIPE</code> would not work properly. There are various workarounds; you can reset the signal mask before the <code>exec()</code> call, or you can do what I did in Factor, and ignore the signal by giving it an empty signal handler instead of a <code>SIG_IGN</code> action.</p>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2010/09/two-things-every-unix-developer-should.html' itemprop='url'/>
<a class='timestamp-link' href='two-things-every-unix-developer-should.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2010-09-03T23:57:00-04:00'>11:57 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=5808076548128250184' onclick=''>
7 comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=5808076548128250184' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=5808076548128250184&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=5808076548128250184&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=5808076548128250184&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=5808076548128250184&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=5808076548128250184&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=5808076548128250184&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='../../index.html' id='Blog1_blog-pager-newer-link' title='Newer Posts'>Newer Posts</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://factor-language.blogspot.com/search?updated-max=2010-09-03T23:57:00-04:00&amp;max-results=7' id='Blog1_blog-pager-older-link' title='Older Posts'>Older Posts</a>
</span>
<a class='home-link' href='../../index.html'>Home</a>
</div>
<div class='clear'></div>
<div class='blog-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://factor-language.blogspot.com/feeds/posts/default' target='_blank' type='application/atom+xml'>Posts (Atom)</a>
</div>
</div>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Older Posts</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='../index.html'>
2010
</a>
<span class='post-count' dir='ltr'>(18)</span>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='index.html'>
September
</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul class='posts'>
<li><a href='factor-094-now-available.html'>Factor 0.94 now available</a></li>
<li><a href='overview-of-factors-io-library.html'>An overview of Factor&#39;s I/O library</a></li>
<li><a href='making-factors-continuous-build-system.html'>Making Factor&#39;s continuous build system more robust</a></li>
<li><a href='two-things-every-unix-developer-should.html'>Two things every Unix developer should know</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/index.html'>
2009
</a>
<span class='post-count' dir='ltr'>(35)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/index.html'>
2008
</a>
<span class='post-count' dir='ltr'>(96)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(17)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2008/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/index.html'>
2007
</a>
<span class='post-count' dir='ltr'>(141)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(10)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(21)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/index.html'>
2006
</a>
<span class='post-count' dir='ltr'>(207)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(30)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(25)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(22)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(26)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/index.html'>
2005
</a>
<span class='post-count' dir='ltr'>(23)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Feed' data-version='1' id='Feed2'>
<h2>Recent Factor Commits</h2>
<div class='widget-content' id='Feed2_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://gitweb.factorcode.org/gitweb.cgi?p=factor.git;a=atom'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget Feed' data-version='1' id='Feed1'>
<h2>Planet Factor</h2>
<div class='widget-content' id='Feed1_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://planet.factorcode.org/feed.xml'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget LinkList' data-version='1' id='LinkList1'>
<h2>Links</h2>
<div class='widget-content'>
<ul>
<li><a href='http://twitter.com/slava_pestov'>@slava_pestov</a></li>
<li><a href='http://factorcode.org/slava/'>My home page</a></li>
<li><a href='http://factorcode.org/'>Factor programming language</a></li>
<li><a href='http://concatenative.org/'>Concatenative language wiki</a></li>
<li><a href='http://planet.factorcode.org/'>Planet Factor</a></li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<!-- end content-wrapper -->
<div id='footer-wrapper'>
<div class='footer no-items section' id='footer'></div>
</div>
</div></div>
<!-- end outer-wrapper -->

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/940443484-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY4oe0R1DGXUusTDVKab2dpJeBhTUA:1693932682848';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d17087850','//factor-language.blogspot.com/2010/09/','17087850');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '17087850', 'title': 'Factor: a practical stack language', 'url': 'http://factor-language.blogspot.com/2010/09/', 'canonicalUrl': 'http://factor-language.blogspot.com/2010/09/', 'homepageUrl': 'http://factor-language.blogspot.com/', 'searchUrl': 'http://factor-language.blogspot.com/search', 'canonicalHomepageUrl': 'http://factor-language.blogspot.com/', 'blogspotFaviconUrl': 'http://factor-language.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en-US', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Factor: a practical stack language - RSS\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/17087850/posts/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/591781cadcbb8744', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'archive', 'pageName': 'September 2010', 'pageTitle': 'Factor: a practical stack language: September 2010'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Factor: a practical stack language', 'description': '\x3ca href\x3d\x22http://factorcode.org/slava\x22\x3eSlava Pestov\x3c/a\x3e\x27s weblog, primarily about \x3ca href\x3d\x22http://factorcode.org\x22\x3eFactor\x3c/a\x3e.', 'url': 'http://factor-language.blogspot.com/2010/09/', 'type': 'feed', 'isSingleItem': false, 'isMultipleItems': true, 'isError': false, 'isPage': false, 'isPost': false, 'isHomepage': false, 'isArchive': true, 'isLabelSearch': false, 'archive': {'year': 2010, 'month': 9, 'rangeMessage': 'Showing posts from September, 2010'}}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1333563935-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/3268905543-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed2', 'sidebar', document.getElementById('Feed2'), {'title': 'Recent Factor Commits', 'showItemDate': true, 'showItemAuthor': true, 'feedUrl': 'http://gitweb.factorcode.org/gitweb.cgi?p\x3dfactor.git;a\x3datom', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed1', 'sidebar', document.getElementById('Feed1'), {'title': 'Planet Factor', 'showItemDate': true, 'showItemAuthor': false, 'feedUrl': 'http://planet.factorcode.org/feed.xml', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LinkListView', new _WidgetInfo('LinkList1', 'sidebar', document.getElementById('LinkList1'), {}, 'displayModeFull'));
</script>
</body>
</html>