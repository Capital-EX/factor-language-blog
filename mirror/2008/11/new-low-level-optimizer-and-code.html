<!DOCTYPE html>
<html dir='ltr'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/55013136-widget_css_bundle.css' rel='stylesheet' type='text/css'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='../../favicon.ico' rel='icon' type='image/x-icon'/>
<link href='new-low-level-optimizer-and-code.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="http://factor-language.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Factor: a practical stack language - RSS" href="http://factor-language.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="https://www.blogger.com/feeds/17087850/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="http://factor-language.blogspot.com/feeds/7826435523964349407/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html' property='og:url'/>
<meta content='New low-level optimizer and code generator' property='og:title'/>
<meta content='I have pushed the new low-level optimizer and code generator. This is the second stage of a big compiler overhaul; the first stage was the n...' property='og:description'/>
<title>Factor: a practical stack language: New low-level optimizer and code generator</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Stretch Denim Light
Designer: Darren Delaye
URL:      www.DarrenDelaye.com
Date:     11 Jul 2006
-----------------------------------------------
*/
body {
background: #ffffff;
margin: 0;
padding: 0px;
font: x-small Verdana, Arial;
text-align: center;
color: #333333;
font-size/* */:/**/small;
font-size: /**/small;
}
a:link {
color: #336699;
}
a:visited {
color: #336699;
}
a img {
border-width: 0;
}
#outer-wrapper {
font: normal normal 100% Verdana, Arial, Sans-serif;;
}
/* Header
----------------------------------------------- */
#header-wrapper {
margin:0;
padding: 0;
background-color: #c4e1ff;
text-align: left;
}
#header {
margin: 0 2%;
background-color: #c4e1ff;
color: #003366;
padding: 0;
font: normal normal 210% Verdana, Arial, Sans-serif;;
position: relative;
}
h1.title {
padding-top: 38px;
margin: 0 1% .1em;
line-height: 1.2em;
font-size: 100%;
}
h1.title a, h1.title a:visited {
color: #003366;
text-decoration: none;
}
#header .description {
display: block;
margin: 0 1%;
padding: 0 0 40px;
line-height: 1.4em;
font-size: 50%;
}
/* Content
----------------------------------------------- */
.clear {
clear: both;
}
#content-wrapper {
margin: 0 2%;
padding: 0 0 15px;
text-align: left;
background-color: #ffffff;
border: 1px solid #ffffff;
border-top: 0;
}
#main-wrapper {
margin-left: 1%;
width: 64%;
float: left;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#sidebar-wrapper {
margin-right: 1%;
width: 29%;
float: right;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2, h3 {
margin: 0;
}
/* Posts
----------------------------------------------- */
.date-header {
margin: 1.5em 0 0;
font-weight: normal;
color: #999999;
font-size: 100%;
}
.post {
margin: 0 0 1.5em;
padding-bottom: 1.5em;
}
.post-title {
margin: 0;
padding: 0;
font-size: 125%;
font-weight: bold;
line-height: 1.1em;
}
.post-title a, .post-title a:visited, .post-title strong {
text-decoration: none;
color: #333333;
font-weight: bold;
}
.post div {
margin: 0 0 .75em;
line-height: 1.3em;
}
.post-footer {
margin: -.25em 0 0;
color: #333333;
font-size: 87%;
}
.post-footer .span {
margin-right: .3em;
}
.post img, table.tr-caption-container {
padding: 4px;
border: 1px solid #ffffff;
}
.tr-caption-container img {
border: none;
padding: 0;
}
.post blockquote {
margin: 1em 20px;
}
.post blockquote p {
margin: .75em 0;
}
/* Comments
----------------------------------------------- */
#comments h4 {
margin: 1em 0;
color: #999999;
}
#comments h4 strong {
font-size: 110%;
}
#comments-block {
margin: 1em 0 1.5em;
line-height: 1.3em;
}
#comments-block dt {
margin: .5em 0;
}
#comments-block dd {
margin: .25em 0 0;
}
#comments-block dd.comment-footer {
margin: -.25em 0 2em;
line-height: 1.4em;
font-size: 78%;
}
#comments-block dd p {
margin: 0 0 .75em;
}
.deleted-comment {
font-style:italic;
color:gray;
}
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/* Sidebar Content
----------------------------------------------- */
.sidebar h2 {
margin: 1.6em 0 .5em;
padding: 4px 5px;
background-color: #ffffff;
font-size: 100%;
color: #333333;
}
.sidebar ul {
margin: 0;
padding: 0;
list-style: none;
}
.sidebar li {
margin: 0;
padding-top: 0;
padding-right: 0;
padding-bottom: .5em;
padding-left: 15px;
text-indent: -15px;
line-height: 1.5em;
}
.sidebar {
color: #333333;
line-height:1.3em;
}
.sidebar .widget {
margin-bottom: 1em;
}
.sidebar .widget-content {
margin: 0 5px;
}
/* Profile
----------------------------------------------- */
.profile-img {
float: left;
margin-top: 0;
margin-right: 5px;
margin-bottom: 5px;
margin-left: 0;
padding: 4px;
border: 1px solid #ffffff;
}
.profile-data {
margin:0;
text-transform:uppercase;
letter-spacing:.1em;
font-weight: bold;
line-height: 1.6em;
font-size: 78%;
}
.profile-datablock {
margin:.5em 0 .5em;
}
.profile-textblock {
margin: 0.5em 0;
line-height: 1.6em;
}
/* Footer
----------------------------------------------- */
#footer {
clear: both;
text-align: center;
color: #333333;
}
#footer .widget {
margin:.5em;
padding-top: 20px;
font-size: 85%;
line-height: 1.5em;
text-align: left;
}
/** Page structure tweaks for layout editor wireframe */
body#layout #header {
width: 750px;
}

--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

</head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d17087850\x26blogName\x3dFactor:+a+practical+stack+language\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://factor-language.blogspot.com/search\x26blogLocale\x3den_US\x26v\x3d2\x26homepageUrl\x3dhttp://factor-language.blogspot.com/\x26targetPostID\x3d7826435523964349407\x26blogPostOrPageUrl\x3dhttp://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html\x26vt\x3d606056679580907767',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div id='outer-wrapper'><div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='new-low-level-optimizer-and-code.html#main'>skip to main </a> |
      <a href='new-low-level-optimizer-and-code.html#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='../../index.html'>
Factor: a practical stack language
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span><a href="http://factorcode.org/slava">Slava Pestov</a>'s weblog, primarily about <a href="http://factorcode.org">Factor</a>.</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol no-items section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Monday, November 03, 2008</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='7826435523964349407' itemprop='postId'/>
<a name='7826435523964349407'></a>
<h3 class='post-title entry-title' itemprop='name'>
New low-level optimizer and code generator
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-7826435523964349407' itemprop='description articleBody'>
I have pushed the new low-level optimizer and code generator. This is the second stage of a big compiler overhaul; the first stage was <a href="../08/new-optimizer.html">the new front-end and high-level optimizer</a>. I first started working on the new code generator in July, but after spending a couple of weeks on it, put it aside because I first wanted to replace the front-end and high-level optimizer. I continued working on the code generator in early October.<br /><br />The new low-level optimizer and code generator replaces the old one-pass code generator. While the old design was relatively simple and generated decent code, it was hard to extend and its limitations were really starting to show, especially on floating point code.<br /><br />The new design is a complete departure from the old way of doing things. First of all, there is a low-level intermediate representation, consisting of a control flow graph of basic blocks. Each basic block is a list of instructions. Instructions operate on virtual registers, of which there is an unlimited supply, and each virtual register is only assigned once. This invariant, known as SSA, simplifies analysis and code generation.<br /><h3>Building low-level IR</h3><br />The low-level optimizer receives high-level compiler IR as input. The first step is to convert it to low-level IR. This is done by the <code>compiler.cfg.builder</code> vocabulary. There are two primary differences between high-level IR and low-level IR:<br /><ul><li>High-level IR represents control structures as nested trees. This explains the <code>compiler.tree</code> vocabulary name. So a piece of code like <code>[ [ 1 + ] [ 1 - ] if 2 * ]</code> becomes a list of three nodes, an <code>#if</code>, a <code>#push</code>, and a <code>#call</code>, where the <code>#if</code> has two more nodes. Low-level IR models the control flow graph directly, so a conditional becomes a node with two successors, where both successors have a common successor. Loops create actual loops in the graph.</li><li>High-level IR is stack-based; stripping out value names gives a valid stack program. Low-level IR makes all stack operations explicit; for example, a call to a primitive such as <code>eq?</code> is a single node in high-level IR, whereas in low-level IR it expands into instructions to read the top two stack items, an instruction to compare the two values in registers, and finally, instructions to store the boolean back on the stack:<br /><pre>##peek V int-regs 7 D 1 <br />##peek V int-regs 8 D 0 <br />##inc-d -2 <br />##compare V int-regs 9 V int-regs 7 V int-regs 8 cc= <br />##inc-d 1 <br />##replace V int-regs 9 D 0 </pre></li><br />By breaking down higher-level stack operations into lower-level register operations, redundancy is revealed, and subsequent optimization passes will eliminate it.</ul><br />The high-level IR to low-level IR conversion is very naive. Other than tail-call optimization, it makes no attempt to eliminate any redundancy in the resulting IR. For example, floating point primitives expand into stack loads, followed by unboxing, followed by the operation itself, and finally a boxing operation. Redundant boxing and unboxing of intermediate values is hidden in high-level IR but becomes explicit in low-level IR.<br /><h3>Useless block elimination</h3><br />Once the CFG has been built, optimization begins. There are a total of 8 optimization passes; I won't talk about all of them, only the interesting ones. The first optimization pass, <code>compiler.cfg.useless-blocks</code>, deletes basic blocks which consist solely of a jump to their successor, as well as conditional blocks where both branches jump to the same basic block. The former case occurs because the low level IR builder does not perform any optimization. The latter case occurs after some code is optimized with the high-level optimizer. For example, suppose you're using <code>contains?</code> to stop iterating early, and don't actually care for the result.<br /><pre>( scratchpad ) [ [ ] contains? drop ] optimized.<br />[<br />    dup length swap 0 -rot \ ( gensym ) [<br />        pick pick < [<br />            swap<br />            >r 2dup<br />            >r<br />            >r nth-unsafe r><br />            r><br />            r><br />            swap<br />            >r rot r><br />            swap<br />            [ 2drop ]<br />            [ >r >r 1 +-integer-fixnum r> r> ( gensym ) ] if<br />        ] [ 3drop f ] if<br />    ] label dup [ ] [ ] if [ ] [ ] if<br />]</pre><br />Note that the two empty conditionals at the end came up because of inlining and dead code elimination. The high level optimizer's dead code elimination doesn't get rid of the empty conditionals, but the low level optimizer does.<br /><br />The old code generator did not delete empty conditionals.<br /><h3>Height normalization</h3><br />After all stack operations in a basic block are expanded into low level IR, there might be a lot of redundant changes to the stack height. The <code>compiler.cfg.height</code> pass takes care of these. For example, <code>>r rot r></code> translates as follows,<br /><pre>##peek V int-regs 63 D 0 <br />##inc-d -1 <br />##inc-r 1 <br />##replace V int-regs 63 R 0 <br />##peek V int-regs 64 D 2 <br />##peek V int-regs 65 D 1 <br />##peek V int-regs 66 D 0 <br />##inc-d -3 <br />##inc-d 3 <br />##replace V int-regs 64 D 0 <br />##replace V int-regs 66 D 1 <br />##replace V int-regs 65 D 2 <br />##peek V int-regs 67 R 0 <br />##inc-r -1 <br />##inc-d 1 <br />##replace V int-regs 67 D 0 </pre><br />After height normalization,<br /><pre>##peek V int-regs 68 D 0 <br />##replace V int-regs 68 R -1 <br />##peek V int-regs 69 D 3 <br />##peek V int-regs 70 D 2 <br />##peek V int-regs 71 D 1 <br />##replace V int-regs 69 D 1 <br />##replace V int-regs 71 D 2 <br />##replace V int-regs 70 D 3 <br />##peek V int-regs 72 R -1 <br />##replace V int-regs 72 D 0 </pre><br />After the height normalization pass runs, the only height changes that remain are at the start of basic blocks, and all <code>##peek</code> and <code>##replace</code> instructions can be viewed as reads and writes of distinguished arrays.<br /><br />The old code generator performed the same optimization, except stack height changes were finalized at the end of a basic block, not at the start. This makes no difference in practice.<br /><h3>Alias analysis</h3><br />I won't attempt to give a description of <a href="http://en.wikipedia.org/wiki/Alias_analysis">alias analysis</a> here, I'll only explain how it applies to Factor. Alias analysis is implemented in <code>compiler.cfg.alias-analysis</code>. The low level IR builder expands stack operations naively, into memory loads/stores. Once stack height changes are coalesced at the start of a basic block, all stack reads and writes look just like array accesses with constant indexes. In addition to this, we of course also have reads and writes of real heap-allocated arrays and tuples. Alias analysis eliminates redundant memory operations by identifying the following patterns:<br /><ul><li>If the same location is read twice with no writes in between, the second read is replaced with a copy.</li><li>If a location is read after being written, the read is replaced with a copy of the value that was written there.</li><li>If a location is written to twice with no read in between, the first write is eliminated.</li></ul><br />After alias analysis runs, each stack location is only read or written at most once, and writes follow reads, per basic block. For array slots this is more complicated. Because two references may in general point to the same array, some optimizations are invalid (for example, if we read from one array, write to another, then read from the first array, the latter read cannot be eliminated because the result depends on whether the two arrays are equal or not). However, a freshly allocated array or tuple is known to be different from any other object, so more aggressive optimizations can be performed in this case. One situation where alias analysis really helps is with inline allocation of arrays. Consider the <code>2array</code> word. After type inference and inlining, the high-level IR looks like so:<br /><pre>( scratchpad ) \ 2array optimized.<br />[ 2 f &lt;array> tuck >r r> 3 set-slot tuck >r r> 2 set-slot ]</pre><br />The semantics of the <code>&lt;array></code> word stipulate that the new array be filled with the initial element, in this case <code>f</code>. However, the array elements are immediately overwritten with stack items. Instead of making <code>2array</code> and similar words into primitives, or adding a new unsafe constructor for an array filled with garbage, the low level IR builder expands <code>&lt;array></code> into several instructions: first a memory allocation, then an initial value fill. This makes the redundancy explicit. We get the following before alias analysis:<br /><pre>_label 0 <br />##prologue <br />_label 1 <br />_gc <br />##inc-d -1 <br />##load-immediate V int-regs 97 16 <br />##replace V int-regs 97 D -2 <br />##load-immediate V int-regs 98 7 <br />##replace V int-regs 98 D -3 <br />##peek V int-regs 99 D -3 <br />##allot V int-regs 100 16 array V int-regs 101 <br />##load-immediate V int-regs 102 16 <br />##set-slot-imm V int-regs 102 V int-regs 100 1 3 <br />##set-slot-imm V int-regs 99 V int-regs 100 2 3 <br />##set-slot-imm V int-regs 99 V int-regs 100 3 3 <br />##replace V int-regs 100 D -2 <br />##peek V int-regs 103 D -1 <br />##peek V int-regs 104 D -2 <br />##replace V int-regs 104 D -3 <br />##replace V int-regs 103 D -2 <br />##replace V int-regs 104 D -1 <br />##peek V int-regs 105 D -3 <br />##replace V int-regs 105 R -1 <br />##peek V int-regs 106 R -1 <br />##replace V int-regs 106 D -3 <br />##load-immediate V int-regs 107 24 <br />##replace V int-regs 107 D -4 <br />##peek V int-regs 108 D -2 <br />##peek V int-regs 109 D -3 <br />##set-slot-imm V int-regs 108 V int-regs 109 3 3 <br />##write-barrier V int-regs 109 V int-regs 110 V int-regs 111 <br />##peek V int-regs 112 D 0 <br />##peek V int-regs 113 D -1 <br />##replace V int-regs 113 D -2 <br />##replace V int-regs 112 D -1 <br />##replace V int-regs 113 D 0 <br />##peek V int-regs 114 D -2 <br />##replace V int-regs 114 R -1 <br />##peek V int-regs 115 R -1 <br />##replace V int-regs 115 D -2 <br />##load-immediate V int-regs 116 16 <br />##replace V int-regs 116 D -3 <br />##peek V int-regs 117 D -1 <br />##peek V int-regs 118 D -2 <br />##set-slot-imm V int-regs 117 V int-regs 118 2 3 <br />##write-barrier V int-regs 118 V int-regs 119 V int-regs 120 <br />##epilogue <br />##return </pre><br />Note the large number of <code>##peek</code> and <code>##replace</code> instructions, most of which is redundant stack traffic, as well as the multiple calls to <code>##set-slot-imm</code>, some of which are redundant. After alias analysis eliminates the unnecessary stack and array operations, we end up with:<br /><pre>_label 0 <br />##prologue <br />_label 1 <br />_gc <br />##inc-d -1 <br />##load-immediate V int-regs 121 16 <br />##load-immediate V int-regs 122 7 <br />##copy V int-regs 123 V int-regs 122 <br />##allot V int-regs 124 16 array V int-regs 125 <br />##load-immediate V int-regs 126 16 <br />##set-slot-imm V int-regs 126 V int-regs 124 1 3 <br />##peek V int-regs 127 D -1 <br />##copy V int-regs 128 V int-regs 124 <br />##copy V int-regs 129 V int-regs 124 <br />##copy V int-regs 130 V int-regs 124 <br />##load-immediate V int-regs 131 24 <br />##copy V int-regs 132 V int-regs 127 <br />##copy V int-regs 133 V int-regs 124 <br />##set-slot-imm V int-regs 132 V int-regs 133 3 3 <br />##write-barrier V int-regs 133 V int-regs 134 V int-regs 135 <br />##peek V int-regs 136 D 0 <br />##copy V int-regs 137 V int-regs 124 <br />##replace V int-regs 137 D 0 <br />##copy V int-regs 138 V int-regs 124 <br />##copy V int-regs 139 V int-regs 124 <br />##load-immediate V int-regs 140 16 <br />##copy V int-regs 141 V int-regs 136 <br />##copy V int-regs 142 V int-regs 124 <br />##set-slot-imm V int-regs 141 V int-regs 142 2 3 <br />##write-barrier V int-regs 142 V int-regs 143 V int-regs 144 <br />##epilogue <br />##return</pre><br />Note that the redundant memory operations were eliminated, but new redundancies have appeared in the form of <code>##copy</code> instructions. The next pass eliminates these.<br /><h3>Value numbering</h3><br />Value numbering is implemented in <code>compiler.cfg.value-numbering</code>. The value numbering pass identifies sets of virtual registers which always contain the same value. In each congruence class, the first virtual register computing the value is known as the leader. References to virtual registers other than the leader are replaced with the leader in subsequent instructions.<br /><br />To figure out which virtual registers always contain the same value, value numbering makes a pass over instructions and builds a <i>value graph</i>. This is a directed acyclic graph where the vertices are called <i>expressions</i>. Every instruction is considered in turn. The instruction's input virtual registers are replaced with the leaders in their value class. Next, an expression is built from the instruction. The expression is simplified using algebraic identities. If the expression does not have an associated value number, the instruction's output register becomes the leader of a new value class.<br /><br /><a href="http://en.wikipedia.org/wiki/Copy_propagation">Copy propagation</a> falls out as a special case of value numbering. Because the destination of a copy always has the same value as the source, subsequent references to the destination are replaced with the source register.<br /><br />Floating point unboxing is also a special case. Consider the following low level IR, generated by the Factor code <code>[ float+ 3.0 float* ]</code>:<br /><pre>_label 0 <br />##prologue <br />_label 1 <br />_gc <br />##inc-d -1 <br />##peek V int-regs 160 D 0 <br />##peek V int-regs 161 D -1 <br />##unbox-float V double-float-regs 162 V int-regs 160 <br />##unbox-float V double-float-regs 163 V int-regs 161 <br />##add-float V double-float-regs 164 V double-float-regs 162 V double-float-regs 163 <br />##box-float V int-regs 165 V double-float-regs 164 V int-regs 166 <br />##replace V int-regs 165 D 0 <br />##load-indirect V int-regs 167 3.0 <br />##replace V int-regs 167 D -1 <br />##peek V int-regs 168 D 0 <br />##peek V int-regs 169 D -1 <br />##unbox-float V double-float-regs 170 V int-regs 168 <br />##unbox-float V double-float-regs 171 V int-regs 169 <br />##mul-float V double-float-regs 172 V double-float-regs 170 V double-float-regs 171 <br />##box-float V int-regs 173 V double-float-regs 172 V int-regs 174 <br />##replace V int-regs 173 D 0 <br />##epilogue <br />##return</pre><br />The result of <code>float+</code> is boxed, written to the stack, then loaded from the stack and unboxed. Clearly, this is inefficient.<br /><br />After alias analysis, the redundant stack store/load is eliminated, but there is still a useless boxing and unboxing, and some useless copies:<br /><pre>_label 0 <br />##prologue <br />_label 1 <br />_gc <br />##inc-d -1 <br />##peek V int-regs 190 D 0 <br />##peek V int-regs 191 D -1 <br />##unbox-float V double-float-regs 192 V int-regs 190 <br />##unbox-float V double-float-regs 193 V int-regs 191 <br />##add-float V double-float-regs 194 V double-float-regs 192 V double-float-regs 193 <br />##box-float V int-regs 195 V double-float-regs 194 V int-regs 196 <br />##load-indirect V int-regs 197 3.0 <br />##copy V int-regs 198 V int-regs 195 <br />##copy V int-regs 199 V int-regs 197 <br />##unbox-float V double-float-regs 200 V int-regs 198 <br />##unbox-float V double-float-regs 201 V int-regs 199 <br />##mul-float V double-float-regs 202 V double-float-regs 200 V double-float-regs 201 <br />##box-float V int-regs 203 V double-float-regs 202 V int-regs 204 <br />##replace V int-regs 203 D 0 <br />##epilogue <br />##return</pre><br />Note that register 194 is boxed into register 195, which is then copied into register 198; finally, register 198 is unboxed into register 200. The value graph contains this path. The expression simplifier then realizes that register 200 always contains the same value as register 194, and thus subsequent uses of register 200 are replaced with register 194.<br /><br />In addition to eliminating unnecessary boxing and unboxing of floating point values, value numbering also optimizes conditionals. For example, <code>[ 100 [ ] times ]</code> generates the following high-level IR:<br /><pre>( scratchpad ) [ 100 [ ] times ] optimized.<br />[<br />    100 0 swap \ ( gensym ) [<br />        over over fixnum&lt;<br />        [ >r >r r> r> >r 1 fixnum+fast r> ( gensym ) ]<br />        [ 2drop ] if<br />    ] label<br />]</pre><br />Implemented naively, <code>fixnum&lt;</code> would compare two values and push a boolean, then <code>if</code> would check if the boolean is true or false. The redundancy here stems from the fact that on a real CPU, you can compare two values and then branch if the result of the comparison is a less-than; there is no need to make a boolean (which itself involves a conditional). The expression simplification machinery used by value numbering converts calls of <code>if</code> where the boolean was produced by a known primitive into more efficient code.<br /><br />Another neat simplification concerns type checks. The dispatch code generated for generic words often contains code like the following,<br /><pre>[ dup tag 2 eq? [ ... ] [ ... ] if ]</pre><br />The <code>tag</code> primitive outputs the low 3 bits of a pointer, as a fixnum. Tag #2 is used for tuple objects. Here is the low level IR generated for a call to <code>tag</code>:<br /><pre>##peek V int-regs 208 D 0 <br />##and-imm V int-regs 209 V int-regs 208 7 <br />##shl-imm V int-regs 210 V int-regs 209 3 <br />##replace V int-regs 210 D 0 </pre><br />Note that the low 3 bits of the pointer are masked, then the result is shifted to the left to make it into a fixnum. Of course, if the result of the shift is being compared against a literal fixnum, the shift is redundant; instead, we can shift the literal <i>to the right</i> by 3. Indeed, after value numbering, <code>tag 2 eq?</code> generates this low-level IR:<br /><pre>##peek V int-regs 211 D 0 <br />##and-imm V int-regs 212 V int-regs 211 7 <br />##shl-imm V int-regs 213 V int-regs 212 3 <br />##load-immediate V int-regs 214 16 <br />##copy V int-regs 215 V int-regs 213 <br />##compare-imm V int-regs 216 V int-regs 213 16 cc= <br />##replace V int-regs 216 D 0 </pre><br />Note that in the above, the <code>##shl-imm</code> instruction still remains even though its result is not used, and there is a <code>##load-immediate</code> whose result is not used either. Just like alias analysis inserts redundant copy instructions, value numbering leaves behind instructions which compute values that are never used; if an instruction computes a value that is already available in another register, subsequent uses of this instruction's output register are replaced, but the instruction still remains. The next pass eliminates such useless instructions.<br /><br />The old code generator performed some optimizations that value numbering can do, such as float unboxing and efficient generation of integer and float conditionals, but it was not as general and there were many redundancies it did not catch.<br /><h3>Dead code elimination</h3><br />Dead code elimination is an essential part of any optimizer. It is implemented in <code>compiler.cfg.dead-code</code>. Note that the high-level optimizer performs dead code elimination as well, in <code>compiler.tree.dead-code</code>. The rationale is that many optimizations are easier to implement if they can leave behind code which computes values that are never used, instead of trying to eliminate all redundancy in one pass. In the low-level optimizer, both alias analysis and value numbering can leave behind many instructions whose results are no longer used. Dead code elimination builds a graph of <i>def-use chains</i>, then takes the transitive closure starting from the registers used by instructions having side effects observable outside of the basic block, such as <code>##set-slot</code> and <code>##replace</code>; any instructions whose destination registers are not part of this closure can be eliminated, since their values are never used. This pass also eliminates <code>##replace</code> instructions which store a value to the same stack location from which it was read. This can arise if inlining produces an idempotent stack shuffle such as <code>swap swap</code>, or if value numbering reduces an operation to a no-op.<br /><br />The old code generation took a different approach: since it generated code in one pass, it had to take care not to emit dead code in the first place. This complicated things; for example, constants were not loaded into registers until absolutely necessary, and complicated state had to be maintained to ensure that no stack location was read or written redundantly.<br /><h3>Write barrier elimination</h3><br />The <code>compiler.cfg.write-barrier</code> pass attempts to speed up slot assignment. Because Factor uses a <a href="http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)#Generational_GC_.28aka_Ephemeral_GC.29">generational garbage collector</a>, every store into an object slot must potentially mark the card holding the object. However, there are three cases when the write barrier can be omitted:<br /><ul><li>If the slot value is immediate -- that is, a fixnum or <code>f</code></li><li>If the object was allocated in the same basic block; new objects go in the nursery, so the object cannot be older than the slot value</li><li>If the object has already been stored to in this basic block; there is no need to generate more than one write barrier since the GC can only run at the beginning of a basic block</li></ul><br />The first case is handled by the low-level IR builder; it uses type information from the high-level IR to omit the write barrier in this case. The latter two cases are handled by a simple analysis that identifies fresh allocations and objects which are written to more than once, deleting <code>##write-barrier</code> instructions which are seen to be redundant.<br /><br />Here is the result of applying all the optimizations described so far to the <code>2array</code> word:<br /><pre>_label 0 <br />##prologue <br />_label 1 <br />_gc <br />##inc-d -1 <br />##load-immediate V int-regs 566340 16 <br />##allot V int-regs 566343 32 array V int-regs 566344 <br />##set-slot-imm V int-regs 566340 V int-regs 566343 1 3 <br />##peek V int-regs 566346 D -1 <br />##set-slot-imm V int-regs 566346 V int-regs 566343 3 3 <br />##peek V int-regs 566355 D 0 <br />##replace V int-regs 566343 D 0 <br />##set-slot-imm V int-regs 566355 V int-regs 566343 2 3 <br />##epilogue <br />##return</pre><br />This is as tight as it gets. There are no redundant memory operations at all, and at this stage recoding <code>2array</code> as a primitive in the VM would offer no benefit at all.<br /><br />Write barrier elimination is the last pass of the CFG optimizer. The old code generator performed similar optimizations for storing immediate values into slots, and for storing into freshly allocated objects. It did not eliminate the write barrier in the third case, however.<br /><br />After this point, the control flow graph is no longer needed, and the CFG is converted into another form called the machine representation. This form consists of a flat list of instructions, with branches and labels instead of control flow graph edges. Otherwise, the instructions are the same as in the CFG representation.<br /><h3>Machine representation</h3><br />The machine representation builder, or linearizer, in <code>compiler.cfg.linearization</code>, traverses the CFG in reverse post order, generating labels and jumps as appropriate. The linearizer inserts GC checks in basic blocks which allocate memory. This is done as after value numbering, since value numbering eliminates many allocations. The linearizer also performs a simple optimization concerning how conditionals are laid out in memory. Sometimes, reversing a conditional results in one less jump. For example, consider the following code: <code>[ [ 1 + ] unless 3 * ]</code>. Without any type information, the old code generator would emit the following assembly:<br /><pre>0x0000000108e577e0: mov    $0x108e577e0,%rbx<br />0x0000000108e577ea: pushq  $0x20<br />0x0000000108e577ef: push   %rbx<br />0x0000000108e577f0: sub    $0x8,%rsp<br />0x0000000108e577f4: mov    (%r14),%rax<br />0x0000000108e577f7: cmp    $0x7,%rax<br />0x0000000108e577fb: je     0x108e5780a<br />0x0000000108e57801: sub    $0x8,%r14<br />0x0000000108e57805: jmpq   0x108e5781c<br />0x0000000108e5780a: mov    $0x8,%rbx<br />0x0000000108e57814: mov    %rbx,(%r14)<br />0x0000000108e57817: callq  0x10894fc20<br />0x0000000108e5781c: mov    $0x18,%rbx<br />0x0000000108e57826: mov    %rbx,0x8(%r14)<br />0x0000000108e5782a: add    $0x8,%r14<br />0x0000000108e5782e: add    $0x18,%rsp<br />0x0000000108e57832: jmpq   0x1089663a0</pre><br />Note that if the comparison fails, the <code>je</code> branch falls through, and then we immediately jump again. Instead, the comparison can be reversed, eliminating the double jump. The new code generator produces the following assembly for the above snippet:<br /><pre>0x000000010980a0e0: mov    $0x10980a0e0,%rax<br />0x000000010980a0ea: pushq  $0x20<br />0x000000010980a0ef: push   %rax<br />0x000000010980a0f0: sub    $0x8,%rsp<br />0x000000010980a0f4: sub    $0x8,%r14<br />0x000000010980a0f8: mov    0x8(%r14),%rax<br />0x000000010980a0fc: cmp    $0x7,%rax<br />0x000000010980a100: jne    0x10980a11c<br />0x000000010980a106: add    $0x8,%r14<br />0x000000010980a10a: mov    $0x8,%rax<br />0x000000010980a114: mov    %rax,(%r14)<br />0x000000010980a117: callq  0x1092e9560<br />0x000000010980a11c: add    $0x8,%r14<br />0x000000010980a120: mov    $0x18,%rax<br />0x000000010980a12a: mov    %rax,(%r14)<br />0x000000010980a12d: add    $0x18,%rsp<br />0x000000010980a131: jmpq   0x1092ed700</pre><br />Note that the conditional was reversed into a <code>jne</code>, and now there is no control flow redundancy.<br /><h3>Two-operand conversion</h3><br />Up until this point, the CFG and machine representations are in SSA (single static assignment) form; each register is only defined once. Instructions are in "3-address" form; an addition is conceptually similar to this C code,<br /><pre>int x = y + z;</pre><br />This is a problem for x86, where all arithmetic instructions store the result in the first input; x86 is a "2-address" architecture:<br /><pre>int y = y + z;</pre><br />To be able to generate code for the x86, the <code>compiler.cfg.two-operand</code> pass rewrites<br /><pre>int x = y + z;</pre><br />into<br /><pre>int x = y; x = x + z;</pre><br />This inserts <code>##copy</code> instructions into the IR, and the resulting IR is no longer in SSA form. After this pass runs, there are many new copy instructions in the IR. Register allocation eliminates redundant copies (in the above example, the assignment of <code>y</code> to <code>x</code> would be redundant if <code>x</code> is never used again; in this case we could just destructively modify <code>y</code>.) On PowerPC, this pass is not used, since it is a 3-address architecture.<br /><br />The old code generator uses a complicated system of "intrinsics" and "templates" to select instructions. There was no low level IR, hence no SSA, instead various ad-hoc heuristics were used to ensure that registers did not get clobbered. This was error-prone, and in the more complex cases, the codegen would give up and spill all registers to the stack before reloading them again. The new approach is much better.<br /><h3>Register allocation</h3><br />The <code>compiler.cfg.linear-scan</code> vocabulary implements a register allocator. This uses the second-chance binpacking variation of linear scan, amended with a simple form of coalescing to eliminate redundant copies inserted by the two operand conversion pass. Linear scan register allocation is very clever and I will not attempt to describe it here. Two good references are:<br /><ul><li><a href="http://www.ssw.uni-linz.ac.at/Research/Papers/Wimmer04Master/">Linear Scan Register Allocation for the Java HotSpot Client Compiler</a></li><li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.34.8435">Quality and Speed in Linear-scan Register Allocation</a></li></ul><br />Note that the original formulation of linear scan register allocation required scratch registers to be reserved for reloading spilled values, and these scratch registers could not be used for anything else. This is unacceptable on x86, which has a serious shortage of registers. The binpacking variant of linear scan uses live interval splitting to ensure that there is always a register available for reloading spill slots.<br /><br />Linear scan seems to work quite well in practice, with very little spilling, even on x86.<br /><br />The old code generator used a very ad-hoc register assignment scheme (I don't even want to call it a "register allocator"). Basically, it would spill <i>all</i> values to the stack (and box them, if they were floats!) as soon as it ran out of registers. So for example, if on x86 it ran out of integer registers but not floating point registers, and you had some unboxed floats in the floating point registers, they would get boxed anyway, leading to terrible performance. To make matters worse, one scratch register had to be reserved because of the on-the-fly nature of the code generator. The new register allocator does not suffer from any of these problems. If you run out of registers, only a minimum number of values will be spilled, spilling floats never boxes them, and there is one additional register available for temporaries on x86.<br /><br />It's pretty embarrassing that until now, Factor's compiler did not have a real register allocator. We got pretty far with the ad-hoc approach but it was time to do things correctly.<br /><h3>Code generation</h3><br />After register allocation, machine code is generated using CPU-specific hooks. Since low-level IR instructions are a lot more fine-grained than Factor primitives, there is a corresponding reduction in the complexity of a CPU backend. Despite offering improved performance, the new code generator actually requires less CPU-specific code to be written. Other than that, there isn't much new here, except that jump tables used by generic dispatch, and loop entry blocks, are aligned on the correct boundaries for x86.<br /><h3>Some performance numbers</h3><br />Soon I'm going to do a comprehensive performance review, comparing Factor's progress over the last year. In the meantime, here are some quick performance measurements of the latest code against the Mac OS X binary from the 21st of October. The computer in question is a Mac Book Pro with a 2.4 GHz Intel Core 2 Duo. For each benchmark, I performed 10 trials, with a full GC before each trial. Times are in milliseconds.<br /><table><tr><th>Benchmark</th><th>Old codegen</th><th>New codegen</th></tr><tr><td>dawes</td><td>176 179 175 175 174 175 175 178 174 175</td><td>145 149 147 148 147 147 148 148 150 148</td></tr><tr><td>mandel</td><td>299 298 300 299 297 297 297 298 296 300</td><td>157 156 155 156 156 155 154 155 157 154</td></tr><tr><td>nsieve</td><td>996 1003 997 1009 1000 1007 1001 1008 1003 1001</td><td>996 954 956 966 961 966 961 964 962 958</td></tr><tr><td>nsieve-bits</td><td>2398 2403 2397 2412 2415 2410 2403 2397 2405 2424</td><td>1840 1838 1835 1840 1833 1833 1839 1847 1829 1833</td></tr><tr><td>nsieve-bytes</td><td>353 355 347 345 354 356 355 354 350 355</td><td>319 327 323 321 318 323 324 322 319 324</td></tr><tr><tr><td>partial-sums</td><td>3217 3209 3232 3209 3227 3237 3277 3231 3210 3209</td><td>2863 2908 2881 2880 2876 2871 2875 2861 2871 2868</td></tr><tr><td>raytracer</td><td>6536 6559 6538 6550 6545 6554 6533 6556 6508 6581</td><td>4918 4918 4936 4906 4907 4941 4935 4931 4929 4898</td></tr><tr><td>reverse-complement</td><td>9376 9229 9252 9247 9483 9224 9280 9266 9559 9347</td><td>9304 9024 9242 9163 9279 9182 9177 9024 9218 8990</td></tr><tr><td>recursive</td><td>8416 8398 8532 8397 8599 8728 8644 8675 8554 8876</td><td>9074 8880 8898 8922 8821 8770 8824 8875 8874 8801</td></tr><tr><td>spectral-norm</td><td>71282 71251 71224 71172 71184 71179 71181 71418 71268 71183</td><td>29585 30331 29927 29873 29644 29829 29905 29864 29954 29897</td></tr></table><br />Amazing speedups on mandel and spectral-norm! The mandel benchmark is now more than 10 times faster than it was before I rewrote the high-level optimizer, and raytracer is almost <a href="../09/improved-performance-on-raytracer.html">3 times faster than it was a month ago</a>.<br /><h3>Some observations</h3><br />When I first started writing the new code generator, it was a completely distinct body of code from the old one. I got as far as implementing alias analysis and value numbering, and then I decided this was too drastic. Instead took a different approach, where I incrementally refactored the old code generator and merged in the new pieces. I got the old code generator to produce low level IR instead of machine code; it would still perform all optimization in one pass. Then I got rid of he ad-hoc register allocation that it performs, and implemented linear scan. The next step was to refactor it to produce SSA code; after that, I merged in the optimization passes I had already implemented earlier. The result was that I was able to replace the entire code generator, while testing it incrementally along the way. I managed to avoid a bootstrap time regression, despite the fact that the new code generator does a lot more work than the old one, by ensuring that the code gen "pays for itself" by generating better code, and by optimizing some other things.<br /><h3>What's next</h3><br />As you can see from the benchmarks, performance has improved, especially on floating point code. There is one regression on the "recursive" benchmark, the PowerPC backend is not done, and there are a couple of bugs. Those should all be easy to fix. Longer-term, the next thing I will work on is global optimization. The new code generator, like the old one, only optimizes in basic blocks. This means that a floating point loop that keeps floats on the stack will box them on every iteration, for example; and in general, loops load and store on the stack. Solving this involves making alias analysis and value numbering smarter, and replacing linear scan register allocation with something more advanced, such as <a href="http://digbib.ubka.uni-karlsruhe.de/volltexte/documents/6532">chordal graph coloring</a>.<br /><br />There are other things I want to do as far as performance goes, other than working on the compiler itself. I'm going to investigate inline caching to speed up generic word call sites which are monomorphic, but the compiler is unable to infer this statically. I will also look into various techniques for speeding up polymorphic dispatch. Finally, I will be optimizing the garbage collector at some point.
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html' itemprop='url'/>
<a class='timestamp-link' href='new-low-level-optimizer-and-code.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2008-11-03T07:54:00-05:00'>7:54 AM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=7826435523964349407' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=7826435523964349407&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=7826435523964349407&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=7826435523964349407&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=7826435523964349407&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=7826435523964349407&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=7826435523964349407&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>No comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
</dl>
</div>
<p class='comment-footer'>
<a href='https://www.blogger.com/comment.g?blogID=17087850&postID=7826435523964349407' onclick=''>Post a Comment</a>
</p>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='further-performance-gains.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='west-coast-trip-100-success.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='../../index.html'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://factor-language.blogspot.com/feeds/7826435523964349407/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Older Posts</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/index.html'>
2010
</a>
<span class='post-count' dir='ltr'>(18)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/index.html'>
2009
</a>
<span class='post-count' dir='ltr'>(35)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='../index.html'>
2008
</a>
<span class='post-count' dir='ltr'>(96)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='index.html'>
November
</a>
<span class='post-count' dir='ltr'>(9)</span>
<ul class='posts'>
<li><a href='new-features-in-smtp-and-ssl-library.html'>New features in SMTP and SSL library allow sending...</a></li>
<li><a href='faster-generic-arithmetic-and-integer.html'>Faster generic arithmetic and integer overflow che...</a></li>
<li><a href='some-recent-ui-rendering-fixes.html'>Some recent UI rendering fixes</a></li>
<li><a href='comparing-performance-of-factor-and-v8.html'>Comparing the performance of Factor and V8</a></li>
<li><a href='factor-presentation-at-otug.html'>Factor presentation at OTUG</a></li>
<li><a href='factor-port-to-win64-in-progress.html'>Factor port to Win64 in progress</a></li>
<li><a href='further-performance-gains.html'>Further performance gains</a></li>
<li><a href='new-low-level-optimizer-and-code.html'>New low-level optimizer and code generator</a></li>
<li><a href='west-coast-trip-100-success.html'>West coast trip: 100% success</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(17)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/index.html'>
2007
</a>
<span class='post-count' dir='ltr'>(141)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(10)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(21)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/index.html'>
2006
</a>
<span class='post-count' dir='ltr'>(207)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(30)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(25)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(22)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(26)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/index.html'>
2005
</a>
<span class='post-count' dir='ltr'>(23)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Feed' data-version='1' id='Feed2'>
<h2>Recent Factor Commits</h2>
<div class='widget-content' id='Feed2_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://gitweb.factorcode.org/gitweb.cgi?p=factor.git;a=atom'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget Feed' data-version='1' id='Feed1'>
<h2>Planet Factor</h2>
<div class='widget-content' id='Feed1_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://planet.factorcode.org/feed.xml'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget LinkList' data-version='1' id='LinkList1'>
<h2>Links</h2>
<div class='widget-content'>
<ul>
<li><a href='http://twitter.com/slava_pestov'>@slava_pestov</a></li>
<li><a href='http://factorcode.org/slava/'>My home page</a></li>
<li><a href='http://factorcode.org/'>Factor programming language</a></li>
<li><a href='http://concatenative.org/'>Concatenative language wiki</a></li>
<li><a href='http://planet.factorcode.org/'>Planet Factor</a></li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<!-- end content-wrapper -->
<div id='footer-wrapper'>
<div class='footer no-items section' id='footer'></div>
</div>
</div></div>
<!-- end outer-wrapper -->

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/940443484-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY7762cX7jJTGWCEExP6UBO5AJfeag:1693932893134';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d17087850','//factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html','17087850');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '17087850', 'title': 'Factor: a practical stack language', 'url': 'http://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html', 'canonicalUrl': 'http://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html', 'homepageUrl': 'http://factor-language.blogspot.com/', 'searchUrl': 'http://factor-language.blogspot.com/search', 'canonicalHomepageUrl': 'http://factor-language.blogspot.com/', 'blogspotFaviconUrl': 'http://factor-language.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en-US', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Factor: a practical stack language - RSS\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/17087850/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/7826435523964349407/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/591781cadcbb8744', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '7826435523964349407', 'pageName': 'New low-level optimizer and code generator', 'pageTitle': 'Factor: a practical stack language: New low-level optimizer and code generator'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'New low-level optimizer and code generator', 'description': 'I have pushed the new low-level optimizer and code generator. This is the second stage of a big compiler overhaul; the first stage was the n...', 'url': 'http://factor-language.blogspot.com/2008/11/new-low-level-optimizer-and-code.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 7826435523964349407}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1333563935-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/3268905543-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed2', 'sidebar', document.getElementById('Feed2'), {'title': 'Recent Factor Commits', 'showItemDate': true, 'showItemAuthor': true, 'feedUrl': 'http://gitweb.factorcode.org/gitweb.cgi?p\x3dfactor.git;a\x3datom', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed1', 'sidebar', document.getElementById('Feed1'), {'title': 'Planet Factor', 'showItemDate': true, 'showItemAuthor': false, 'feedUrl': 'http://planet.factorcode.org/feed.xml', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LinkListView', new _WidgetInfo('LinkList1', 'sidebar', document.getElementById('LinkList1'), {}, 'displayModeFull'));
</script>
</body>
</html>