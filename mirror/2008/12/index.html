<!DOCTYPE html>
<html dir='ltr'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/55013136-widget_css_bundle.css' rel='stylesheet' type='text/css'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='../../favicon.ico' rel='icon' type='image/x-icon'/>
<link href='index.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="http://factor-language.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Factor: a practical stack language - RSS" href="http://factor-language.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Factor: a practical stack language - Atom" href="https://www.blogger.com/feeds/17087850/posts/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://factor-language.blogspot.com/2008/12/' property='og:url'/>
<meta content='Factor: a practical stack language' property='og:title'/>
<meta content='&lt;a href=&quot;http://factorcode.org/slava&quot;&gt;Slava Pestov&lt;/a&gt;&#39;s weblog, primarily about &lt;a href=&quot;http://factorcode.org&quot;&gt;Factor&lt;/a&gt;.' property='og:description'/>
<title>Factor: a practical stack language: December 2008</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Stretch Denim Light
Designer: Darren Delaye
URL:      www.DarrenDelaye.com
Date:     11 Jul 2006
-----------------------------------------------
*/
body {
background: #ffffff;
margin: 0;
padding: 0px;
font: x-small Verdana, Arial;
text-align: center;
color: #333333;
font-size/* */:/**/small;
font-size: /**/small;
}
a:link {
color: #336699;
}
a:visited {
color: #336699;
}
a img {
border-width: 0;
}
#outer-wrapper {
font: normal normal 100% Verdana, Arial, Sans-serif;;
}
/* Header
----------------------------------------------- */
#header-wrapper {
margin:0;
padding: 0;
background-color: #c4e1ff;
text-align: left;
}
#header {
margin: 0 2%;
background-color: #c4e1ff;
color: #003366;
padding: 0;
font: normal normal 210% Verdana, Arial, Sans-serif;;
position: relative;
}
h1.title {
padding-top: 38px;
margin: 0 1% .1em;
line-height: 1.2em;
font-size: 100%;
}
h1.title a, h1.title a:visited {
color: #003366;
text-decoration: none;
}
#header .description {
display: block;
margin: 0 1%;
padding: 0 0 40px;
line-height: 1.4em;
font-size: 50%;
}
/* Content
----------------------------------------------- */
.clear {
clear: both;
}
#content-wrapper {
margin: 0 2%;
padding: 0 0 15px;
text-align: left;
background-color: #ffffff;
border: 1px solid #ffffff;
border-top: 0;
}
#main-wrapper {
margin-left: 1%;
width: 64%;
float: left;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#sidebar-wrapper {
margin-right: 1%;
width: 29%;
float: right;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2, h3 {
margin: 0;
}
/* Posts
----------------------------------------------- */
.date-header {
margin: 1.5em 0 0;
font-weight: normal;
color: #999999;
font-size: 100%;
}
.post {
margin: 0 0 1.5em;
padding-bottom: 1.5em;
}
.post-title {
margin: 0;
padding: 0;
font-size: 125%;
font-weight: bold;
line-height: 1.1em;
}
.post-title a, .post-title a:visited, .post-title strong {
text-decoration: none;
color: #333333;
font-weight: bold;
}
.post div {
margin: 0 0 .75em;
line-height: 1.3em;
}
.post-footer {
margin: -.25em 0 0;
color: #333333;
font-size: 87%;
}
.post-footer .span {
margin-right: .3em;
}
.post img, table.tr-caption-container {
padding: 4px;
border: 1px solid #ffffff;
}
.tr-caption-container img {
border: none;
padding: 0;
}
.post blockquote {
margin: 1em 20px;
}
.post blockquote p {
margin: .75em 0;
}
/* Comments
----------------------------------------------- */
#comments h4 {
margin: 1em 0;
color: #999999;
}
#comments h4 strong {
font-size: 110%;
}
#comments-block {
margin: 1em 0 1.5em;
line-height: 1.3em;
}
#comments-block dt {
margin: .5em 0;
}
#comments-block dd {
margin: .25em 0 0;
}
#comments-block dd.comment-footer {
margin: -.25em 0 2em;
line-height: 1.4em;
font-size: 78%;
}
#comments-block dd p {
margin: 0 0 .75em;
}
.deleted-comment {
font-style:italic;
color:gray;
}
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/* Sidebar Content
----------------------------------------------- */
.sidebar h2 {
margin: 1.6em 0 .5em;
padding: 4px 5px;
background-color: #ffffff;
font-size: 100%;
color: #333333;
}
.sidebar ul {
margin: 0;
padding: 0;
list-style: none;
}
.sidebar li {
margin: 0;
padding-top: 0;
padding-right: 0;
padding-bottom: .5em;
padding-left: 15px;
text-indent: -15px;
line-height: 1.5em;
}
.sidebar {
color: #333333;
line-height:1.3em;
}
.sidebar .widget {
margin-bottom: 1em;
}
.sidebar .widget-content {
margin: 0 5px;
}
/* Profile
----------------------------------------------- */
.profile-img {
float: left;
margin-top: 0;
margin-right: 5px;
margin-bottom: 5px;
margin-left: 0;
padding: 4px;
border: 1px solid #ffffff;
}
.profile-data {
margin:0;
text-transform:uppercase;
letter-spacing:.1em;
font-weight: bold;
line-height: 1.6em;
font-size: 78%;
}
.profile-datablock {
margin:.5em 0 .5em;
}
.profile-textblock {
margin: 0.5em 0;
line-height: 1.6em;
}
/* Footer
----------------------------------------------- */
#footer {
clear: both;
text-align: center;
color: #333333;
}
#footer .widget {
margin:.5em;
padding-top: 20px;
font-size: 85%;
line-height: 1.5em;
text-align: left;
}
/** Page structure tweaks for layout editor wireframe */
body#layout #header {
width: 750px;
}

--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=17087850&amp;zx=107902e8-e226-40c6-bb3f-e93edf539d65' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

</head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d17087850\x26blogName\x3dFactor:+a+practical+stack+language\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://factor-language.blogspot.com/search\x26blogLocale\x3den_US\x26v\x3d2\x26homepageUrl\x3dhttp://factor-language.blogspot.com/\x26vt\x3d1910212838315471456',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div id='outer-wrapper'><div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='index.html#main'>skip to main </a> |
      <a href='index.html#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='../../index.html'>
Factor: a practical stack language
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span><a href="http://factorcode.org/slava">Slava Pestov</a>'s weblog, primarily about <a href="http://factorcode.org">Factor</a>.</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol no-items section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Friday, December 19, 2008</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='8259971192556026555' itemprop='postId'/>
<a name='8259971192556026555'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='discussion-of-concatenative-languages.html'>Discussion of concatenative languages on various blogs</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-8259971192556026555' itemprop='description articleBody'>
A couple of bloggers are exploring concatenative languages and have posted interesting articles, with more depth than the usual "<code>dup *</code> squares an integer" cursory glance:<br /><ul><li>Ruminations of a Programmer - <a href="http://debasishg.blogspot.com/2008/12/enjoy.html">enJOY</a></li><li>Ruminations of a Programmer - <a href="http://debasishg.blogspot.com/2008/12/combinators-for-fun-and-profit.html">Combinators for fun and profit</a></li><li>Code Commit - <a href="http://www.codecommit.com/blog/cat/the-joy-of-concatenative-languages-part-1">The joy of concatenative languages - part 1</a></li></li><li>Code Commit - <a href="http://www.codecommit.com/blog/cat/the-joy-of-concatenative-languages-part-2">The joy of concatenative languages - part 2</a></li></ul><br /><a href="http://elasticdog.com/">Aaron Schaefer</a> (elasticdog in <code>#concatenative</code>; he's been contributing to our math library and writing project euler solutions) has written a couple of introductory Factor articles too, and is working on a third installment.<br /><br />Things have also been picking up in the <code>#concatenative</code> IRC channel on FreeNode, and usually there are 60-70 people online. Lots of interesting discussion going on there.<br /><br />Finally, I'll take this opportunity to plug the <a href="http://concatenative.org/wiki/view/Front%20Page">concatenative languages wiki</a>, and remind everyone that it running on a web framework and server written in a concatenative language. Other than an issue with our O/R mapper that we fixed recently, it has been running without any problems. It has been serving between 10,000 and 24,000 hits a day; I'd like to see it hit 10 or 20 times that number and see how it holds up.
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2008/12/discussion-of-concatenative-languages.html' itemprop='url'/>
<a class='timestamp-link' href='discussion-of-concatenative-languages.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2008-12-19T06:15:00-05:00'>6:15 AM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=8259971192556026555' onclick=''>
No comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=8259971192556026555' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=8259971192556026555&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8259971192556026555&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8259971192556026555&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8259971192556026555&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8259971192556026555&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8259971192556026555&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Monday, December 15, 2008</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='http://factorcode.org/chart1.png' itemprop='image_url'/>
<meta content='17087850' itemprop='blogId'/>
<meta content='8730663294961200084' itemprop='postId'/>
<a name='8730663294961200084'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='prevalence-of-shuffle-words-and.html'>Prevalence of shuffle words and dataflow combinators</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-8730663294961200084' itemprop='description articleBody'>
Today on IRC, <code>binarybandit</code> wrote this word:<br /><pre><font color="#000000"><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>pie-chart</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>keys</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>values</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>url</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> <font color="#006666">&quot;</font><font color="#006666">|</font><font color="#006666">&quot;</font> join <font color="#006633">]</font> <font color="#006633">[</font> <font color="#006633">[</font> number&gt;string <font color="#006633">]</font> map <font color="#006666">&quot;</font><font color="#006666">,</font><font color="#006666">&quot;</font> join <font color="#006633">]</font> bi*<br />    <font color="#006666">&quot;</font><font color="#006666">http://chart.apis.google.com/chart?cht=p&amp;chs=500x250&amp;chl=%s&amp;chd=t:%s</font><font color="#006666">&quot;</font> sprintf <font color="#000000"><strong>;</strong></font><br /></font></pre><br />(Side note: it uses the recently-contributed <code>printf</code> vocabulary, which is a nice piece of work: it parses the format string uses PEGs and compiles to quotations at compile time).<br /><br />This inspired me to make some pie charts showing the frequency of usages of <a href="http://docs.factorcode.org/content/article-shuffle-words.html">shuffle words</a> and <a href="http://docs.factorcode.org/content/article-dataflow.html">dataflow combinators</a> in the Factor library. So first, we need a word which takes a sequence of words and counts the number of usages of each, normalizing the results so that their sum is 1:<br /><pre><font color="#000000"><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>usage-histogram</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>words</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>keys</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>values</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> <font color="#006633">[</font> name&gt;&gt; <font color="#006633">]</font> <font color="#006633">[</font> usage length <font color="#006633">]</font> bi <font color="#006633">]</font> <font color="#006633">{</font> <font color="#006633">}</font> map&gt;assoc<br />    dup values sum '<font color="#006633">[</font> _ /f <font color="#006633">]</font> assoc-map<br />    sort-values unzip <font color="#000000"><strong>;</strong></font><br /></font></pre><br />Now we can use a meta-programming trick to extract the list of shufflers from the shuffle words help article:<br /><pre><font color="#000000"><font color="#006666">&quot;</font><font color="#006666">shuffle-words</font><font color="#006666">&quot;</font> &gt;link uses <font color="#006633">[</font> word? <font color="#006633">]</font> filter usage-histogram pie-chart print<br /></font></pre><br />Here is the resulting chart:<br /><img src="http://factorcode.org/chart1.png"><br />Note that it counts the number of usages of each shuffler, so a word that calls a shuffler more than once is not counted, and a word which uses two distinct shufflers is counted twice. You can see that dup, drop and swap are by far the most popular, and the more complex patterns are rarely used. It is interesting that when beginners first start writing Factor they tend to write code which is heavily biased towards the less frequently-used shufflers. I think teaching dataflow combinators before shufflers can help here, because they make it easier to structure your code in a clean way.<br /><br />For cleave/spread/apply combinators, we have to do a bit more work to get a list of them programatically, since they're spread over several help articles:<br /><pre><font color="#000000"><font color="#006633">[</font> <font color="#006666">&quot;</font><font color="#006666">cleave-combinators</font><font color="#006666">&quot;</font> <font color="#006666">&quot;</font><font color="#006666">spread-combinators</font><font color="#006666">&quot;</font> <font color="#006666">&quot;</font><font color="#006666">apply-combinators</font><font color="#006666">&quot;</font> <font color="#006633">]</font><br /><font color="#006633">[</font> &gt;link uses <font color="#006633">]</font> map concat <font color="#006633">{</font> either? both? <font color="#006633">}</font> diff<br /><font color="#006633">[</font> word? <font color="#006633">]</font> filter<br /></font></pre><br />Now we can make the pie chart as before. Here is the result:<br /><img src="http://factorcode.org/chart2.png"><br />Again, <code>bi</code> completely dominates.<br /><br />I'm not sure what to make of these results, other than that the Google Charts API is pretty nifty, and that there is untapped potential for "code data mining" in Factor's reflection capabilities. We could use this to discover potential abstractions and patterns.
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2008/12/prevalence-of-shuffle-words-and.html' itemprop='url'/>
<a class='timestamp-link' href='prevalence-of-shuffle-words-and.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2008-12-15T18:27:00-05:00'>6:27 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=8730663294961200084' onclick=''>
No comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=8730663294961200084' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=8730663294961200084&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8730663294961200084&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8730663294961200084&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8730663294961200084&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8730663294961200084&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8730663294961200084&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Thursday, December 04, 2008</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='6405874209088924172' itemprop='postId'/>
<a name='6405874209088924172'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='arrays-of-unboxed-primitive-values-and.html'>Arrays of unboxed primitive values, and a faster Mersenne Twister</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-6405874209088924172' itemprop='description articleBody'>
I added efficient arrays of integers and floats to Factor. We've had <a href="http://docs.factorcode.org/content/vocab-byte-arrays.html">byte-arrays</a> and <a href="http://docs.factorcode.org/content/vocab-float-arrays.html">float-arrays</a> for a while; this code is essentially a generalization of these to every primitive C type: chars, shorts, ints, longs, long longs, unsigned version of all of these, as well as floats and doubles.<br /><h3>Specialized arrays</h3><br />For each primitive C type, there is a vocabulary named <code>specialized-arrays.<i>type</i></code>, which defines a class named <code><i>type</i>-array</code>, and several related words: a constructor, and a conversion word for converting existing sequences to specialized arrays of this type. As with all sequence types, the class implements methods for <code>length</code>, <code>nth</code> and <code>set-nth</code>; there is also a literal syntax for parsing and printing specialized arrays. An example:<br /><pre><font color="#000000"><font color="#000000"><strong>USE:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>specialized-arrays.int</strong></font><br />int-array<font color="#006633">{</font> <font color="#ff0000">584</font> <font color="#ff0000">-13</font> <font color="#ff0000">11</font> <font color="#006633">}</font> <font color="#006633">[</font> <font color="#ff0000">10</font> + <font color="#006633">]</font> map<br /></font></pre><br /><h3>Specialized vectors</h3><br />There are also resizeable versions of all of these, in <code>specialized-vectors.<i>type</i></code>. These work like ordinary vectors; you can use words such as <code>push</code> and <code>pop</code>, accumulating a stream of values in a vector.<br /><h3>Direct arrays</h3><br />A third variant is also provided. These are the "direct specialized arrays". Sometimes when working with a C library, the library hands you a pointer to some data which is to be viewed as an array of primitive values. Direct arrays accomplish this. For every primitive C type, the <code>specialized-arrays.direct.<i>type</i></code> vocabulary provides a word named <code>&lt;direct-<i>type</i>-array&gt;</code> which takes an alien pointer and a length. It wraps them in a tuple which responds to the sequence protocol by reading from memory.<br /><h3>Memory-mapped files</h3><br />Direct arrays are useful in another context, and that is when working with memory-mapped files. Again, for every primitive C type, there is a vocabulary, <code>io.mmap.<i>type</i></code>. It defines two words, <code>&lt;mapped-<i>type</i>-array&gt;</code> and <code>with-mapped-<i>type</i>-file</code>. Here is an example usage of the latter: we're mapping in a file of floating point numbers and adding them up:<pre><font color="#000000"><font color="#006633">[</font> <font color="#ff0000">0.0</font> <font color="#006633">[</font> + <font color="#006633">]</font> reduce <font color="#006633">]</font> with-mapped-float-file<br /></font></pre>We've had <code>io.mmap</code> for a while, but specialized arrays make this library a lot more useful.<br /><br />This is all really powerful stuff, because on one hand, we have these high-level data types that behave like any other Factor sequence and can be used interchangeably with sequence utility words, but on the other hand, not only do they offer a space savings over heterogeneous <a href="http://docs.factorcode.org/content/vocab-arrays.html">arrays</a> by avoiding boxing, they also have the potential to improve performance -- the low-level primitives they're built on are already optimized by the compiler, and it is possible to write code which operates on specialized float and integer arrays without any boxing at all.<br /><h3>Mersenne Twister</h3><br />A good example of an algorithm which benefits from specialized arrays is the <a href="http://en.wikipedia.org/wiki/Mersenne_Twister">Mersenne Twister random number generator</a>. The <a href="http://gitweb.factorcode.org/gitweb.cgi?p=factor/.git;a=blob;f=basis/random/mersenne-twister/mersenne-twister.factor;hb=HEAD">Factor implementation</a> is very straightforward, and shorter than the <a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c">C version</a>. I changed it to use a <code>uint-array</code> instead of a normal <code>array</code> to store the random generator state. After making a few more tweaks, the time taken to generate a 100,000,000-element byte array of random bytes on my Mac Book Pro went down to 5 seconds, from 37 seconds!<br /><br />Here is the main method of the Mersenne Twister, <code>random-32*</code>, and its surrounding utility words:<br /><pre><font color="#000000"><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mt-n</strong></font> <font color="#ff0000">624</font> <font color="#000000"><strong>;</strong></font> inline<br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mt-m</strong></font> <font color="#ff0000">397</font> <font color="#000000"><strong>;</strong></font> inline<br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mt-a</strong></font> <font color="#003333">HEX:</font><font color="#003333"> </font><font color="#003333">9908b0df</font> <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mersenne-wrap</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong>'</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    dup mt-n &gt; <font color="#006633">[</font> mt-n - <font color="#006633">]</font> when <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>wrap-nth</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>seq</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>obj</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> mersenne-wrap <font color="#006633">]</font> dip nth-unsafe <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>set-wrap-nth</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>obj</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>seq</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> mersenne-wrap <font color="#006633">]</font> dip set-nth-unsafe <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>calculate-y</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>seq</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>y</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> wrap-nth <font color="#ff0000">31</font> mask-bit <font color="#006633">]</font><br />    <font color="#006633">[</font> <font color="#006633">[</font> 1+ <font color="#006633">]</font> <font color="#006633">[</font> wrap-nth <font color="#006633">]</font> bi* <font color="#ff0000">31</font> bits <font color="#006633">]</font> 2bi bitor <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>(mt-generate)</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>n</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>seq</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>next</strong></font><font color="#793b1c"><strong>-</strong></font><font color="#793b1c"><strong>mt</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font><br />        calculate-y<br />        <font color="#006633">[</font> 2/ <font color="#006633">]</font> <font color="#006633">[</font> odd? mt-a <font color="#ff0000">0</font> ? <font color="#006633">]</font> bi bitxor<br />    <font color="#006633">]</font> <font color="#006633">[</font><br />        <font color="#006633">[</font> mt-m + <font color="#006633">]</font> <font color="#006633">[</font> wrap-nth <font color="#006633">]</font> bi*<br />    <font color="#006633">]</font> 2bi bitxor <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mt-generate</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>mt</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font><br />        mt-n swap seq&gt;&gt; '<font color="#006633">[</font><br />            _ <font color="#006633">[</font> (mt-generate) <font color="#006633">]</font> <font color="#006633">[</font> set-wrap-nth <font color="#006633">]</font> 2bi<br />        <font color="#006633">]</font> each<br />    <font color="#006633">]</font> <font color="#006633">[</font> <font color="#ff0000">0</font> &gt;&gt;i drop <font color="#006633">]</font> bi <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>mt-temper</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>y</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>yt</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    dup <font color="#ff0000">-11</font> shift bitxor<br />    dup <font color="#ff0000">7</font> shift <font color="#003333">HEX:</font><font color="#003333"> </font><font color="#003333">9d2c5680</font> bitand bitxor<br />    dup <font color="#ff0000">15</font> shift <font color="#003333">HEX:</font><font color="#003333"> </font><font color="#003333">efc60000</font> bitand bitxor<br />    dup <font color="#ff0000">-18</font> shift bitxor <font color="#000000"><strong>;</strong></font> inline<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>next-index</strong></font>  <font color="#6600cc">( </font><font color="#793b1c"><strong>mt</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>i</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    dup i&gt;&gt; dup mt-n &lt; <font color="#006633">[</font> nip <font color="#006633">]</font> <font color="#006633">[</font> drop mt-generate <font color="#ff0000">0</font> <font color="#006633">]</font> if <font color="#000000"><strong>;</strong></font> inline<br /><br />M: mersenne-twister random-32* <font color="#6600cc">( </font><font color="#793b1c"><strong>mt</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>r</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font> next-index <font color="#006633">]</font><br />    <font color="#006633">[</font> seq&gt;&gt; wrap-nth mt-temper <font color="#006633">]</font><br />    <font color="#006633">[</font> <font color="#006633">[</font> 1+ <font color="#006633">]</font> change-i drop <font color="#006633">]</font> tri <font color="#000000"><strong>;</strong></font><br /></font></pre><br />A naive implementation of Factor would struggle with this code because of method dispatch overhead (all arithmetic and sequence access is generic), and because of overflow checks on integer arithmetic (integers have arbitrary precision in Factor). Thankfully, the Factor implementation is not naive. The high-level optimizer, applied to the above code, produces the following output -- note that the translation from high-level IR back to Factor code is imprecise, and some IR nodes cannot be expressed, hence the <code>"COMPLEX SHUFFLE"</code> strings that appear here:<br /><pre><font color="#000000"><font color="#006633">[</font><br />    dup <font color="#999999">&gt;r</font> dup <font color="#ff0000">3</font> slot dup <font color="#ff0000">624</font> fixnum&lt;<br />    <font color="#006633">[</font> nip <font color="#006633">]</font> <font color="#006633">[</font><br />        drop dup <font color="#999999">&gt;r</font> <font color="#ff0000">624</font> swap <font color="#ff0000">2</font> slot<br />        <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">0</font> -rot <font color="#000000"><strong>\</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>(</strong></font> gensym ) <font color="#006633">[</font><br />            pick pick fixnum&lt; <font color="#006633">[</font><br />                swap <font color="#999999">&gt;r</font> 2dup <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> 2dup<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> 2dup <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> 2dup<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> slot<br />                swap <font color="#ff0000">4</font> fixnum*fast<br />                alien-unsigned-4 <font color="#ff0000">2147483648</font> fixnum-bitand<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">&gt;r</font> <font color="#ff0000">1</font> fixnum+fast<br />                <font color="#999999">r&gt;</font> <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> slot swap <font color="#ff0000">4</font> fixnum*fast<br />                alien-unsigned-4 <font color="#ff0000">2147483647</font> fixnum-bitand<br />                fixnum-bitor dup <font color="#999999">&gt;r</font> <font color="#ff0000">-1</font> fixnum-shift-fast<br />                <font color="#999999">r&gt;</font> <font color="#ff0000">1</font> fixnum-bitand <font color="#ff0000">1</font> eq? <font color="#ff0000">2567483615</font> <font color="#ff0000">0</font> rot<br />                <font color="#006633">[</font> drop <font color="#006633">]</font> <font color="#006633">[</font> nip <font color="#006633">]</font> if fixnum-bitxor<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">&gt;r</font> <font color="#ff0000">397</font> fixnum+fast<br />                <font color="#999999">r&gt;</font> <font color="#999999">&gt;r</font> dup <font color="#ff0000">624</font> fixnum&gt;<br />                <font color="#006633">[</font> <font color="#ff0000">624</font> fixnum-fast <font color="#006633">]</font> <font color="#006633">[</font> <font color="#006633">]</font> if <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> slot<br />                swap <font color="#ff0000">4</font> fixnum*fast<br />                alien-unsigned-4 fixnum-bitxor<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> slot<br />                swap <font color="#ff0000">4</font> fixnum*fast<br />                set-alien-unsigned-4 <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#999999">r&gt;</font> swap<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#ff0000">1</font> fixnum+fast<br />                <font color="#006666">&quot;</font><font color="#006666">COMPLEX</font><font color="#006666"> </font><font color="#006666">SHUFFLE</font><font color="#006666">&quot;</font> <font color="#6600cc">( </font><font color="#793b1c"><strong>gensym</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />            <font color="#006633">]</font> <font color="#006633">[</font> 3drop <font color="#006633">]</font> if<br />        <font color="#006633">]</font> label <font color="#999999">r&gt;</font> <font color="#999999">&gt;r</font> <font color="#ff0000">0</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> set-slot <font color="#ff0000">0</font><br />    <font color="#006633">]</font> if <font color="#999999">r&gt;</font> dup <font color="#999999">&gt;r</font> <font color="#ff0000">2</font> slot <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> slot swap <font color="#ff0000">4</font> fixnum*fast<br />    alien-unsigned-4 dup <font color="#ff0000">-11</font> fixnum-shift-fast fixnum-bitxor<br />    dup <font color="#ff0000">7</font> fixnum-shift-fast <font color="#ff0000">2636928640</font> fixnum-bitand<br />    fixnum-bitxor dup <font color="#ff0000">15</font> fixnum-shift-fast<br />    <font color="#ff0000">4022730752</font> fixnum-bitand fixnum-bitxor<br />    dup <font color="#ff0000">-18</font> fixnum-shift-fast fixnum-bitxor <font color="#999999">r&gt;</font> dup <font color="#999999">&gt;r</font> <font color="#ff0000">3</font> slot<br />    <font color="#ff0000">1</font> fixnum+fast <font color="#999999">r&gt;</font> swap swap <font color="#999999">&gt;r</font> <font color="#999999">r&gt;</font> <font color="#ff0000">3</font> set-slot<br /><font color="#006633">]</font><br /></font></pre><br />Only primitive calls remain; everything else has evaporated after 11 distinct optimization passes. A lot of redundant stack shuffling still remains; the low-level optimizer eliminates that and produces a sequence of low-level IR instructions:<br /><pre><font color="#000000">=== word: mersenne-twister=&gt;random-32*, label: mersenne-twister=&gt;random-32*<br /><br />_label <font color="#ff0000">0</font> <br />##prologue <br />_label <font color="#ff0000">1</font> <br />##inc-r <font color="#ff0000">1</font> <br />##inc-d <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368412</font> D <font color="#ff0000">1</font> <br />##replace V int-regs <font color="#ff0000">1368412</font> R <font color="#ff0000">0</font> <br />##slot-imm V int-regs <font color="#ff0000">1368417</font> V int-regs <font color="#ff0000">1368412</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368417</font> D <font color="#ff0000">0</font> <br />_compare-imm-branch <font color="#ff0000">3</font> V int-regs <font color="#ff0000">1368417</font> <font color="#ff0000">4992</font> cc&gt;= <br />_label <font color="#ff0000">2</font> <br />##inc-d <font color="#ff0000">-1</font> <br />##peek V int-regs <font color="#ff0000">1368425</font> D <font color="#ff0000">-1</font> <br />##replace V int-regs <font color="#ff0000">1368425</font> D <font color="#ff0000">0</font> <br />_branch <font color="#ff0000">13</font> <br />_label <font color="#ff0000">3</font> <br />##inc-r <font color="#ff0000">1</font> <br />##inc-d <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368427</font> D <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368427</font> R <font color="#ff0000">0</font> <br />##load-immediate V int-regs <font color="#ff0000">1368429</font> <font color="#ff0000">4992</font> <br />##slot-imm V int-regs <font color="#ff0000">1368434</font> V int-regs <font color="#ff0000">1368427</font> <font color="#ff0000">2</font> <font color="#ff0000">2</font> <br />##load-immediate V int-regs <font color="#ff0000">1368439</font> <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368434</font> D <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368429</font> D <font color="#ff0000">1</font> <br />##replace V int-regs <font color="#ff0000">1368439</font> D <font color="#ff0000">2</font> <br />##loop-entry <br />_label <font color="#ff0000">4</font> <br />##peek V int-regs <font color="#ff0000">1368443</font> D <font color="#ff0000">2</font> <br />_compare-imm-branch <font color="#ff0000">11</font> V int-regs <font color="#ff0000">1368443</font> <font color="#ff0000">4992</font> cc&gt;= <br />_label <font color="#ff0000">5</font> <br />##inc-r <font color="#ff0000">7</font> <br />##peek V int-regs <font color="#ff0000">1368453</font> D <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368454</font> D <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368453</font> R <font color="#ff0000">6</font> <br />##peek V int-regs <font color="#ff0000">1368456</font> D <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368454</font> R <font color="#ff0000">4</font> <br />##replace V int-regs <font color="#ff0000">1368456</font> R <font color="#ff0000">5</font> <br />##replace V int-regs <font color="#ff0000">1368454</font> R <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368456</font> R <font color="#ff0000">3</font> <br />##replace V int-regs <font color="#ff0000">1368454</font> R <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368456</font> R <font color="#ff0000">1</font> <br />##slot-imm V int-regs <font color="#ff0000">1368478</font> V int-regs <font color="#ff0000">1368454</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368483</font> V int-regs <font color="#ff0000">1368456</font> <br />##shl-imm V int-regs <font color="#ff0000">1368483</font> V int-regs <font color="#ff0000">1368483</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368486</font> V int-regs <font color="#ff0000">1368483</font> <br />##sar-imm V int-regs <font color="#ff0000">1368486</font> V int-regs <font color="#ff0000">1368486</font> <font color="#ff0000">3</font> <br />##add-imm V int-regs <font color="#ff0000">1368487</font> V int-regs <font color="#ff0000">1368478</font> <font color="#ff0000">13</font> <br />##add V int-regs <font color="#ff0000">1368489</font> V int-regs <font color="#ff0000">1368486</font> V int-regs <font color="#ff0000">1368487</font> <br />##alien-unsigned-4 V int-regs <font color="#ff0000">1368490</font> V int-regs <font color="#ff0000">1368489</font> <br />##copy V int-regs <font color="#ff0000">1368491</font> V int-regs <font color="#ff0000">1368490</font> <br />##shl-imm V int-regs <font color="#ff0000">1368491</font> V int-regs <font color="#ff0000">1368491</font> <font color="#ff0000">3</font> <br />##load-immediate V int-regs <font color="#ff0000">1368492</font> <font color="#ff0000">17179869184</font> <br />##copy V int-regs <font color="#ff0000">1368495</font> V int-regs <font color="#ff0000">1368491</font> <br />##and V int-regs <font color="#ff0000">1368495</font> V int-regs <font color="#ff0000">1368495</font> V int-regs <font color="#ff0000">1368492</font> <br />##add-imm V int-regs <font color="#ff0000">1368501</font> V int-regs <font color="#ff0000">1368456</font> <font color="#ff0000">8</font> <br />##copy V int-regs <font color="#ff0000">1368512</font> V int-regs <font color="#ff0000">1368501</font> <br />##shl-imm V int-regs <font color="#ff0000">1368512</font> V int-regs <font color="#ff0000">1368512</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368515</font> V int-regs <font color="#ff0000">1368512</font> <br />##sar-imm V int-regs <font color="#ff0000">1368515</font> V int-regs <font color="#ff0000">1368515</font> <font color="#ff0000">3</font> <br />##add V int-regs <font color="#ff0000">1368518</font> V int-regs <font color="#ff0000">1368515</font> V int-regs <font color="#ff0000">1368487</font> <br />##alien-unsigned-4 V int-regs <font color="#ff0000">1368519</font> V int-regs <font color="#ff0000">1368518</font> <br />##copy V int-regs <font color="#ff0000">1368520</font> V int-regs <font color="#ff0000">1368519</font> <br />##shl-imm V int-regs <font color="#ff0000">1368520</font> V int-regs <font color="#ff0000">1368520</font> <font color="#ff0000">3</font> <br />##load-immediate V int-regs <font color="#ff0000">1368521</font> <font color="#ff0000">17179869176</font> <br />##copy V int-regs <font color="#ff0000">1368524</font> V int-regs <font color="#ff0000">1368520</font> <br />##and V int-regs <font color="#ff0000">1368524</font> V int-regs <font color="#ff0000">1368524</font> V int-regs <font color="#ff0000">1368521</font> <br />##copy V int-regs <font color="#ff0000">1368527</font> V int-regs <font color="#ff0000">1368495</font> <br />##or V int-regs <font color="#ff0000">1368527</font> V int-regs <font color="#ff0000">1368527</font> V int-regs <font color="#ff0000">1368524</font> <br />##copy V int-regs <font color="#ff0000">1368532</font> V int-regs <font color="#ff0000">1368527</font> <br />##sar-imm V int-regs <font color="#ff0000">1368532</font> V int-regs <font color="#ff0000">1368532</font> <font color="#ff0000">4</font> <br />##copy V int-regs <font color="#ff0000">1368533</font> V int-regs <font color="#ff0000">1368532</font> <br />##shl-imm V int-regs <font color="#ff0000">1368533</font> V int-regs <font color="#ff0000">1368533</font> <font color="#ff0000">3</font> <br />##replace V int-regs <font color="#ff0000">1368533</font> D <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368537</font> V int-regs <font color="#ff0000">1368527</font> <br />##and-imm V int-regs <font color="#ff0000">1368537</font> V int-regs <font color="#ff0000">1368537</font> <font color="#ff0000">8</font> <br />##load-immediate V int-regs <font color="#ff0000">1368542</font> <font color="#ff0000">20539868920</font> <br />##load-immediate V int-regs <font color="#ff0000">1368543</font> <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368543</font> D <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368542</font> D <font color="#ff0000">1</font> <br />_compare-imm-branch <font color="#ff0000">7</font> V int-regs <font color="#ff0000">1368537</font> <font color="#ff0000">8</font> cc/= <br />_label <font color="#ff0000">6</font> <br />##inc-d <font color="#ff0000">-1</font> <br />_branch <font color="#ff0000">8</font> <br />_label <font color="#ff0000">7</font> <br />##inc-d <font color="#ff0000">-1</font> <br />##peek V int-regs <font color="#ff0000">1368550</font> D <font color="#ff0000">-1</font> <br />##replace V int-regs <font color="#ff0000">1368550</font> D <font color="#ff0000">0</font> <br />_label <font color="#ff0000">8</font> <br />##inc-r <font color="#ff0000">-1</font> <br />##peek V int-regs <font color="#ff0000">1368551</font> D <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368552</font> D <font color="#ff0000">0</font> <br />##copy V int-regs <font color="#ff0000">1368553</font> V int-regs <font color="#ff0000">1368551</font> <br />##xor V int-regs <font color="#ff0000">1368553</font> V int-regs <font color="#ff0000">1368553</font> V int-regs <font color="#ff0000">1368552</font> <br />##replace V int-regs <font color="#ff0000">1368553</font> D <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368554</font> R <font color="#ff0000">0</font> <br />##peek V int-regs <font color="#ff0000">1368555</font> R <font color="#ff0000">-1</font> <br />##add-imm V int-regs <font color="#ff0000">1368559</font> V int-regs <font color="#ff0000">1368554</font> <font color="#ff0000">3176</font> <br />##replace V int-regs <font color="#ff0000">1368555</font> R <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368559</font> D <font color="#ff0000">0</font> <br />_compare-imm-branch <font color="#ff0000">10</font> V int-regs <font color="#ff0000">1368559</font> <font color="#ff0000">4992</font> cc&lt;= <br />_label <font color="#ff0000">9</font> <br />##peek V int-regs <font color="#ff0000">1368569</font> D <font color="#ff0000">0</font> <br />##sub-imm V int-regs <font color="#ff0000">1368570</font> V int-regs <font color="#ff0000">1368569</font> <font color="#ff0000">4992</font> <br />##replace V int-regs <font color="#ff0000">1368570</font> D <font color="#ff0000">0</font> <br />_label <font color="#ff0000">10</font> <br />##inc-r <font color="#ff0000">-6</font> <br />##inc-d <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368571</font> R <font color="#ff0000">-6</font> <br />##slot-imm V int-regs <font color="#ff0000">1368574</font> V int-regs <font color="#ff0000">1368571</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##peek V int-regs <font color="#ff0000">1368575</font> D <font color="#ff0000">1</font> <br />##copy V int-regs <font color="#ff0000">1368579</font> V int-regs <font color="#ff0000">1368575</font> <br />##shl-imm V int-regs <font color="#ff0000">1368579</font> V int-regs <font color="#ff0000">1368579</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368582</font> V int-regs <font color="#ff0000">1368579</font> <br />##sar-imm V int-regs <font color="#ff0000">1368582</font> V int-regs <font color="#ff0000">1368582</font> <font color="#ff0000">3</font> <br />##add-imm V int-regs <font color="#ff0000">1368583</font> V int-regs <font color="#ff0000">1368574</font> <font color="#ff0000">13</font> <br />##add V int-regs <font color="#ff0000">1368585</font> V int-regs <font color="#ff0000">1368582</font> V int-regs <font color="#ff0000">1368583</font> <br />##alien-unsigned-4 V int-regs <font color="#ff0000">1368586</font> V int-regs <font color="#ff0000">1368585</font> <br />##copy V int-regs <font color="#ff0000">1368587</font> V int-regs <font color="#ff0000">1368586</font> <br />##shl-imm V int-regs <font color="#ff0000">1368587</font> V int-regs <font color="#ff0000">1368587</font> <font color="#ff0000">3</font> <br />##peek V int-regs <font color="#ff0000">1368588</font> D <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368590</font> V int-regs <font color="#ff0000">1368588</font> <br />##xor V int-regs <font color="#ff0000">1368590</font> V int-regs <font color="#ff0000">1368590</font> V int-regs <font color="#ff0000">1368587</font> <br />##peek V int-regs <font color="#ff0000">1368591</font> R <font color="#ff0000">-4</font> <br />##peek V int-regs <font color="#ff0000">1368592</font> R <font color="#ff0000">-5</font> <br />##slot-imm V int-regs <font color="#ff0000">1368597</font> V int-regs <font color="#ff0000">1368592</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368602</font> V int-regs <font color="#ff0000">1368591</font> <br />##shl-imm V int-regs <font color="#ff0000">1368602</font> V int-regs <font color="#ff0000">1368602</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368605</font> V int-regs <font color="#ff0000">1368602</font> <br />##sar-imm V int-regs <font color="#ff0000">1368605</font> V int-regs <font color="#ff0000">1368605</font> <font color="#ff0000">3</font> <br />##add-imm V int-regs <font color="#ff0000">1368606</font> V int-regs <font color="#ff0000">1368597</font> <font color="#ff0000">13</font> <br />##add V int-regs <font color="#ff0000">1368608</font> V int-regs <font color="#ff0000">1368605</font> V int-regs <font color="#ff0000">1368606</font> <br />##copy V int-regs <font color="#ff0000">1368610</font> V int-regs <font color="#ff0000">1368590</font> <br />##sar-imm V int-regs <font color="#ff0000">1368610</font> V int-regs <font color="#ff0000">1368610</font> <font color="#ff0000">3</font> <br />##set-alien-integer-4 V int-regs <font color="#ff0000">1368608</font> V int-regs <font color="#ff0000">1368610</font> <br />##peek V int-regs <font color="#ff0000">1368611</font> R <font color="#ff0000">-2</font> <br />##peek V int-regs <font color="#ff0000">1368612</font> R <font color="#ff0000">-3</font> <br />##peek V int-regs <font color="#ff0000">1368613</font> R <font color="#ff0000">-1</font> <br />##add-imm V int-regs <font color="#ff0000">1368620</font> V int-regs <font color="#ff0000">1368611</font> <font color="#ff0000">8</font> <br />##replace V int-regs <font color="#ff0000">1368620</font> D <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368612</font> D <font color="#ff0000">0</font> <br />##replace V int-regs <font color="#ff0000">1368613</font> D <font color="#ff0000">1</font> <br />_branch <font color="#ff0000">4</font> <br />_label <font color="#ff0000">11</font> <br />##inc-d <font color="#ff0000">-3</font> <br />_label <font color="#ff0000">12</font> <br />##inc-r <font color="#ff0000">-1</font> <br />##inc-d <font color="#ff0000">1</font> <br />##peek V int-regs <font color="#ff0000">1368626</font> R <font color="#ff0000">-1</font> <br />##load-immediate V int-regs <font color="#ff0000">1368628</font> <font color="#ff0000">0</font> <br />##set-slot-imm V int-regs <font color="#ff0000">1368628</font> V int-regs <font color="#ff0000">1368626</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##replace V int-regs <font color="#ff0000">1368628</font> D <font color="#ff0000">0</font> <br />_label <font color="#ff0000">13</font> <br />##inc-r <font color="#ff0000">-1</font> <br />##peek V int-regs <font color="#ff0000">1368634</font> R <font color="#ff0000">-1</font> <br />##slot-imm V int-regs <font color="#ff0000">1368639</font> V int-regs <font color="#ff0000">1368634</font> <font color="#ff0000">2</font> <font color="#ff0000">2</font> <br />##slot-imm V int-regs <font color="#ff0000">1368644</font> V int-regs <font color="#ff0000">1368639</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##peek V int-regs <font color="#ff0000">1368645</font> D <font color="#ff0000">0</font> <br />##copy V int-regs <font color="#ff0000">1368649</font> V int-regs <font color="#ff0000">1368645</font> <br />##shl-imm V int-regs <font color="#ff0000">1368649</font> V int-regs <font color="#ff0000">1368649</font> <font color="#ff0000">2</font> <br />##copy V int-regs <font color="#ff0000">1368652</font> V int-regs <font color="#ff0000">1368649</font> <br />##sar-imm V int-regs <font color="#ff0000">1368652</font> V int-regs <font color="#ff0000">1368652</font> <font color="#ff0000">3</font> <br />##add-imm V int-regs <font color="#ff0000">1368653</font> V int-regs <font color="#ff0000">1368644</font> <font color="#ff0000">13</font> <br />##add V int-regs <font color="#ff0000">1368655</font> V int-regs <font color="#ff0000">1368652</font> V int-regs <font color="#ff0000">1368653</font> <br />##alien-unsigned-4 V int-regs <font color="#ff0000">1368656</font> V int-regs <font color="#ff0000">1368655</font> <br />##copy V int-regs <font color="#ff0000">1368657</font> V int-regs <font color="#ff0000">1368656</font> <br />##shl-imm V int-regs <font color="#ff0000">1368657</font> V int-regs <font color="#ff0000">1368657</font> <font color="#ff0000">3</font> <br />##copy V int-regs <font color="#ff0000">1368661</font> V int-regs <font color="#ff0000">1368657</font> <br />##sar-imm V int-regs <font color="#ff0000">1368661</font> V int-regs <font color="#ff0000">1368661</font> <font color="#ff0000">14</font> <br />##copy V int-regs <font color="#ff0000">1368662</font> V int-regs <font color="#ff0000">1368661</font> <br />##shl-imm V int-regs <font color="#ff0000">1368662</font> V int-regs <font color="#ff0000">1368662</font> <font color="#ff0000">3</font> <br />##copy V int-regs <font color="#ff0000">1368665</font> V int-regs <font color="#ff0000">1368657</font> <br />##xor V int-regs <font color="#ff0000">1368665</font> V int-regs <font color="#ff0000">1368665</font> V int-regs <font color="#ff0000">1368662</font> <br />##copy V int-regs <font color="#ff0000">1368669</font> V int-regs <font color="#ff0000">1368665</font> <br />##shl-imm V int-regs <font color="#ff0000">1368669</font> V int-regs <font color="#ff0000">1368669</font> <font color="#ff0000">7</font> <br />##load-immediate V int-regs <font color="#ff0000">1368670</font> <font color="#ff0000">21095429120</font> <br />##copy V int-regs <font color="#ff0000">1368673</font> V int-regs <font color="#ff0000">1368669</font> <br />##and V int-regs <font color="#ff0000">1368673</font> V int-regs <font color="#ff0000">1368673</font> V int-regs <font color="#ff0000">1368670</font> <br />##copy V int-regs <font color="#ff0000">1368676</font> V int-regs <font color="#ff0000">1368665</font> <br />##xor V int-regs <font color="#ff0000">1368676</font> V int-regs <font color="#ff0000">1368676</font> V int-regs <font color="#ff0000">1368673</font> <br />##copy V int-regs <font color="#ff0000">1368680</font> V int-regs <font color="#ff0000">1368676</font> <br />##shl-imm V int-regs <font color="#ff0000">1368680</font> V int-regs <font color="#ff0000">1368680</font> <font color="#ff0000">15</font> <br />##load-immediate V int-regs <font color="#ff0000">1368681</font> <font color="#ff0000">32181846016</font> <br />##copy V int-regs <font color="#ff0000">1368684</font> V int-regs <font color="#ff0000">1368680</font> <br />##and V int-regs <font color="#ff0000">1368684</font> V int-regs <font color="#ff0000">1368684</font> V int-regs <font color="#ff0000">1368681</font> <br />##copy V int-regs <font color="#ff0000">1368687</font> V int-regs <font color="#ff0000">1368676</font> <br />##xor V int-regs <font color="#ff0000">1368687</font> V int-regs <font color="#ff0000">1368687</font> V int-regs <font color="#ff0000">1368684</font> <br />##copy V int-regs <font color="#ff0000">1368691</font> V int-regs <font color="#ff0000">1368687</font> <br />##sar-imm V int-regs <font color="#ff0000">1368691</font> V int-regs <font color="#ff0000">1368691</font> <font color="#ff0000">21</font> <br />##copy V int-regs <font color="#ff0000">1368692</font> V int-regs <font color="#ff0000">1368691</font> <br />##shl-imm V int-regs <font color="#ff0000">1368692</font> V int-regs <font color="#ff0000">1368692</font> <font color="#ff0000">3</font> <br />##copy V int-regs <font color="#ff0000">1368695</font> V int-regs <font color="#ff0000">1368687</font> <br />##xor V int-regs <font color="#ff0000">1368695</font> V int-regs <font color="#ff0000">1368695</font> V int-regs <font color="#ff0000">1368692</font> <br />##replace V int-regs <font color="#ff0000">1368695</font> D <font color="#ff0000">0</font> <br />##slot-imm V int-regs <font color="#ff0000">1368701</font> V int-regs <font color="#ff0000">1368634</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##add-imm V int-regs <font color="#ff0000">1368704</font> V int-regs <font color="#ff0000">1368701</font> <font color="#ff0000">8</font> <br />##set-slot-imm V int-regs <font color="#ff0000">1368704</font> V int-regs <font color="#ff0000">1368634</font> <font color="#ff0000">3</font> <font color="#ff0000">2</font> <br />##epilogue <br />##return<br /></font></pre><br />Finally, after register allocation, these instructions map pretty much directly onto machine code:<br /><pre>0x0000000109901940: add    $0x8,%r15<br />0x0000000109901944: add    $0x8,%r14<br />0x0000000109901948: mov    -0x8(%r14),%rax<br />0x000000010990194c: mov    %rax,(%r15)<br />0x000000010990194f: mov    0x16(%rax),%rcx<br />0x0000000109901953: mov    %rcx,(%r14)<br />0x0000000109901956: cmp    $0x1380,%rcx<br />0x000000010990195d: jge    0x109901973<br />0x0000000109901963: sub    $0x8,%r14<br />0x0000000109901967: mov    0x8(%r14),%rcx<br />0x000000010990196b: mov    %rcx,(%r14)<br />0x000000010990196e: jmpq   0x109901b5b<br />0x0000000109901973: add    $0x8,%r15<br />0x0000000109901977: add    $0x8,%r14<br />0x000000010990197b: mov    -0x10(%r14),%rcx<br />0x000000010990197f: mov    %rcx,(%r15)<br />0x0000000109901982: mov    $0x1380,%rax<br />0x000000010990198c: mov    0xe(%rcx),%rdx<br />0x0000000109901990: mov    $0x0,%rcx<br />0x000000010990199a: mov    %rdx,(%r14)<br />0x000000010990199d: mov    %rax,-0x8(%r14)<br />0x00000001099019a1: mov    %rcx,-0x10(%r14)<br />0x00000001099019a5: nop    <br />0x00000001099019a6: nop    <br />0x00000001099019a7: nop    <br />0x00000001099019a8: nop    <br />0x00000001099019a9: nop    <br />0x00000001099019aa: nop    <br />0x00000001099019ab: nop    <br />0x00000001099019ac: nop    <br />0x00000001099019ad: nop    <br />0x00000001099019ae: nop    <br />0x00000001099019af: nop    <br />0x00000001099019b0: mov    -0x10(%r14),%rcx<br />0x00000001099019b4: cmp    $0x1380,%rcx<br />0x00000001099019bb: jge    0x109901b3a<br />0x00000001099019c1: add    $0x38,%r15<br />0x00000001099019c5: mov    -0x8(%r14),%rcx<br />0x00000001099019c9: mov    (%r14),%rdx<br />0x00000001099019cc: mov    %rcx,-0x30(%r15)<br />0x00000001099019d0: mov    -0x10(%r14),%rcx<br />0x00000001099019d4: mov    %rdx,-0x20(%r15)<br />0x00000001099019d8: mov    %rcx,-0x28(%r15)<br />0x00000001099019dc: mov    %rdx,-0x10(%r15)<br />0x00000001099019e0: mov    %rcx,-0x18(%r15)<br />0x00000001099019e4: mov    %rdx,(%r15)<br />0x00000001099019e7: mov    %rcx,-0x8(%r15)<br />0x00000001099019eb: mov    0x16(%rdx),%rax<br />0x00000001099019ef: mov    %rcx,%rdx<br />0x00000001099019f2: shl    $0x2,%rdx<br />0x00000001099019f6: sar    $0x3,%rdx<br />0x00000001099019fa: lea    0xd(%rax),%rbx<br />0x00000001099019fe: lea    (%rdx,%rbx,1),%rax<br />0x0000000109901a02: mov    (%rax),%edx<br />0x0000000109901a04: shl    $0x3,%rdx<br />0x0000000109901a08: mov    $0x400000000,%rax<br />0x0000000109901a12: and    %rax,%rdx<br />0x0000000109901a15: lea    0x8(%rcx),%rax<br />0x0000000109901a19: shl    $0x2,%rax<br />0x0000000109901a1d: sar    $0x3,%rax<br />0x0000000109901a21: lea    (%rax,%rbx,1),%rcx<br />0x0000000109901a25: mov    (%rcx),%eax<br />0x0000000109901a27: shl    $0x3,%rax<br />0x0000000109901a2b: mov    $0x3fffffff8,%rcx<br />0x0000000109901a35: and    %rcx,%rax<br />0x0000000109901a38: or     %rax,%rdx<br />0x0000000109901a3b: mov    %rdx,%rax<br />0x0000000109901a3e: sar    $0x4,%rax<br />0x0000000109901a42: shl    $0x3,%rax<br />0x0000000109901a46: mov    %rax,-0x10(%r14)<br />0x0000000109901a4a: and    $0x8,%rdx<br />0x0000000109901a4e: mov    $0x4c84586f8,%rax<br />0x0000000109901a58: mov    $0x0,%rcx<br />0x0000000109901a62: mov    %rcx,(%r14)<br />0x0000000109901a65: mov    %rax,-0x8(%r14)<br />0x0000000109901a69: cmp    $0x8,%rdx<br />0x0000000109901a6d: jne    0x109901a7c<br />0x0000000109901a73: sub    $0x8,%r14<br />0x0000000109901a77: jmpq   0x109901a87<br />0x0000000109901a7c: sub    $0x8,%r14<br />0x0000000109901a80: mov    0x8(%r14),%rcx<br />0x0000000109901a84: mov    %rcx,(%r14)<br />0x0000000109901a87: sub    $0x8,%r15<br />0x0000000109901a8b: mov    -0x8(%r14),%rcx<br />0x0000000109901a8f: mov    (%r14),%rax<br />0x0000000109901a92: xor    %rax,%rcx<br />0x0000000109901a95: mov    %rcx,-0x8(%r14)<br />0x0000000109901a99: mov    (%r15),%rcx<br />0x0000000109901a9c: mov    0x8(%r15),%rax<br />0x0000000109901aa0: lea    0xc68(%rcx),%rdx<br />0x0000000109901aa7: mov    %rax,(%r15)<br />0x0000000109901aaa: mov    %rdx,(%r14)<br />0x0000000109901aad: cmp    $0x1380,%rdx<br />0x0000000109901ab4: jle    0x109901ac7<br />0x0000000109901aba: mov    (%r14),%rdx<br />0x0000000109901abd: lea    -0x1380(%rdx),%rax<br />0x0000000109901ac4: mov    %rax,(%r14)<br />0x0000000109901ac7: sub    $0x30,%r15<br />0x0000000109901acb: add    $0x8,%r14<br />0x0000000109901acf: mov    0x30(%r15),%rax<br />0x0000000109901ad3: mov    0x16(%rax),%rdx<br />0x0000000109901ad7: mov    -0x8(%r14),%rax<br />0x0000000109901adb: shl    $0x2,%rax<br />0x0000000109901adf: sar    $0x3,%rax<br />0x0000000109901ae3: lea    0xd(%rdx),%rcx<br />0x0000000109901ae7: lea    (%rax,%rcx,1),%rdx<br />0x0000000109901aeb: mov    (%rdx),%ecx<br />0x0000000109901aed: shl    $0x3,%rcx<br />0x0000000109901af1: mov    -0x10(%r14),%rdx<br />0x0000000109901af5: xor    %rcx,%rdx<br />0x0000000109901af8: mov    0x20(%r15),%rcx<br />0x0000000109901afc: mov    0x28(%r15),%rax<br />0x0000000109901b00: mov    0x16(%rax),%rbx<br />0x0000000109901b04: shl    $0x2,%rcx<br />0x0000000109901b08: sar    $0x3,%rcx<br />0x0000000109901b0c: lea    0xd(%rbx),%rax<br />0x0000000109901b10: lea    (%rcx,%rax,1),%rbx<br />0x0000000109901b14: sar    $0x3,%rdx<br />0x0000000109901b18: mov    %edx,(%rbx)<br />0x0000000109901b1a: mov    0x10(%r15),%rdx<br />0x0000000109901b1e: mov    0x18(%r15),%rbx<br />0x0000000109901b22: mov    0x8(%r15),%rax<br />0x0000000109901b26: lea    0x8(%rdx),%rcx<br />0x0000000109901b2a: mov    %rcx,-0x10(%r14)<br />0x0000000109901b2e: mov    %rbx,(%r14)<br />0x0000000109901b31: mov    %rax,-0x8(%r14)<br />0x0000000109901b35: jmpq   0x1099019b0<br />0x0000000109901b3a: sub    $0x18,%r14<br />0x0000000109901b3e: sub    $0x8,%r15<br />0x0000000109901b42: add    $0x8,%r14<br />0x0000000109901b46: mov    0x8(%r15),%rcx<br />0x0000000109901b4a: mov    $0x0,%rax<br />0x0000000109901b54: mov    %rax,0x16(%rcx)<br />0x0000000109901b58: mov    %rax,(%r14)<br />0x0000000109901b5b: sub    $0x8,%r15<br />0x0000000109901b5f: mov    0x8(%r15),%rax<br />0x0000000109901b63: mov    0xe(%rax),%rcx<br />0x0000000109901b67: mov    0x16(%rcx),%rbx<br />0x0000000109901b6b: mov    (%r14),%rcx<br />0x0000000109901b6e: shl    $0x2,%rcx<br />0x0000000109901b72: sar    $0x3,%rcx<br />0x0000000109901b76: lea    0xd(%rbx),%rdx<br />0x0000000109901b7a: lea    (%rcx,%rdx,1),%rbx<br />0x0000000109901b7e: mov    (%rbx),%edx<br />0x0000000109901b80: shl    $0x3,%rdx<br />0x0000000109901b84: mov    %rdx,%rbx<br />0x0000000109901b87: sar    $0xe,%rbx<br />0x0000000109901b8b: shl    $0x3,%rbx<br />0x0000000109901b8f: xor    %rbx,%rdx<br />0x0000000109901b92: mov    %rdx,%rbx<br />0x0000000109901b95: shl    $0x7,%rbx<br />0x0000000109901b99: mov    $0x4e962b400,%rcx<br />0x0000000109901ba3: and    %rcx,%rbx<br />0x0000000109901ba6: xor    %rbx,%rdx<br />0x0000000109901ba9: mov    %rdx,%rbx<br />0x0000000109901bac: shl    $0xf,%rbx<br />0x0000000109901bb0: mov    $0x77e300000,%rcx<br />0x0000000109901bba: and    %rcx,%rbx<br />0x0000000109901bbd: xor    %rbx,%rdx<br />0x0000000109901bc0: mov    %rdx,%rbx<br />0x0000000109901bc3: sar    $0x15,%rbx<br />0x0000000109901bc7: shl    $0x3,%rbx<br />0x0000000109901bcb: xor    %rbx,%rdx<br />0x0000000109901bce: mov    %rdx,(%r14)<br />0x0000000109901bd1: mov    0x16(%rax),%rdx<br />0x0000000109901bd5: lea    0x8(%rdx),%rbx<br />0x0000000109901bd9: mov    %rbx,0x16(%rax)<br />0x0000000109901bdd: retq   </pre><br />That's pretty tight code for a dynamic language.<br /><h3>Implementation of specialized arrays</h3><br />So there are 13 C types here: <code>char uchar short ushort int uint long ulong longlong ulonglong float double void*</code>. For each C type, we have four vocabularies: <code>specialized-arrays.<i>type</i></code>, <code>specialized-vectors.<i>type</i></code>, <code>specialized-arrays.direct.<i>type</i></code>, and <code>io.mmap.<i>type</i></code>. Implementing all of this by hand would be a pain: even with the best abstractions in Factor's object system, at a minimum there would be 4 or 5 lines of code per type and per feature, and ideally you'd want to clone some methods once per implementation instead of abstracting everything out through dynamic dispatch, for performance reasons. So instead, I did what any self-respecting programmer would do in this situation: I made the computer do all the hard work. Factor lacked the abstraction necessary to express what I wanted, but Factor is extensible, so I just implemented the abstraction -- as a library. The feature we want here is essentially C++ templates. So yes, there is now a <code>functors</code> vocabulary which implements what amounts to C++ templates... in Factor. I called them "functors", even though they're more like templates than ML functors, because the term "template" has meaning in Factor's web framework and I didn't want to create confusion. I don't expect functors will see widespread use and I certainly don't want to promote this as a central feature of Factor. It is just another library that happens to extend the parser -- like many other Factor libraries do.<br /><br />Let's look at how functors are used. For example, here is the entire text of the <code>specialized-arrays.direct.int</code> vocabulary:<br /><pre><font color="#000000"><font color="#000000"><strong>USING: </strong></font><font color="#003333">specialized-arrays.int</font><font color="#003333"> </font><font color="#003333">specialized-arrays.direct.functor</font><font color="#003333"> </font><font color="#000000"><strong>;</strong></font><br /><font color="#000000"><strong>IN:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>specialized-arrays.direct.int</strong></font><br /><br />&lt;&lt; <font color="#006666">&quot;</font><font color="#006666">int</font><font color="#006666">&quot;</font> define-direct-array &gt;&gt;<br /></font></pre><br />The key of course is that its invoking the <code>define-direct-array</code> word, at parse time (hence the <code>&lt;&lt;</code> and <code>&gt;&gt;</code>). This word is defined in the <code>specialized-arrays.direct.functor</code> vocabulary, and its definition looks quite unusual:<br /><pre><font color="#000000">FUNCTOR: define-direct-array <font color="#6600cc">( </font><font color="#793b1c"><strong>T</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br /><br />A'      IS $<font color="#006633">{</font>T<font color="#006633">}</font>-array<br />&gt;A'     IS &gt;$<font color="#006633">{</font>T<font color="#006633">}</font>-array<br />&lt;A'&gt;    IS &lt;$<font color="#006633">{</font>A'<font color="#006633">}</font>&gt;<br /><br />A       DEFINES direct-$<font color="#006633">{</font>T<font color="#006633">}</font>-array<br />&lt;A&gt;     DEFINES &lt;$<font color="#006633">{</font>A<font color="#006633">}</font>&gt;<br /><br />NTH     <font color="#006633">[</font> T dup c-getter array-accessor <font color="#006633">]</font><br />SET-NTH <font color="#006633">[</font> T dup c-setter array-accessor <font color="#006633">]</font><br /><br />WHERE<br /><br />TUPLE: A<br /><font color="#006633">{</font> underlying alien read-only <font color="#006633">}</font><br /><font color="#006633">{</font> length fixnum read-only <font color="#006633">}</font> <font color="#000000"><strong>;</strong></font><br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>&lt;A&gt;</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>alien</strong></font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>len</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#793b1c"><strong>direct</strong></font><font color="#793b1c"><strong>-</strong></font><font color="#793b1c"><strong>array</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font> A boa <font color="#000000"><strong>;</strong></font> inline<br />M: A length length&gt;&gt; <font color="#000000"><strong>;</strong></font><br />M: A nth-unsafe underlying&gt;&gt; NTH call <font color="#000000"><strong>;</strong></font><br />M: A set-nth-unsafe underlying&gt;&gt; SET-NTH call <font color="#000000"><strong>;</strong></font><br />M: A like drop dup A instance? <font color="#006633">[</font> &gt;A' execute <font color="#006633">]</font> unless <font color="#000000"><strong>;</strong></font><br />M: A new-sequence drop &lt;A'&gt; execute <font color="#000000"><strong>;</strong></font><br /><br />INSTANCE: A sequence<br /><br />;FUNCTOR<br /></font></pre>This <code>FUNCTOR: ... IS / DEFINES ... WHERE ... ;FUNCTOR</code> business is not new syntax in the language; its just parsing words defined in the <code>functors</code> vocabulary. Essentially we are defining a word, <code>define-direct-array</code>, which generates code, parameterized by a single input <code>T</code>, which is a C type name in this case. Note that what's going on here is more elaborate than text substitution; the functor body is parsed once, and converted into code which instantiates it, rather than simply expanding at usages like C preprocessor macros do.<br /><br />Functors may seem like an elaborate new piece of functionality, comparable in complexity to the object system or locals, but in reality, the emperor has no clothes; they have a trivial desugaring.<br /><br />First, inside a functor body, the <code>TUPLE:</code>, <code>:</code>, <code>M:</code> and <code>INSTANCE:</code> are shadowed to special words in the <code>functors</code> vocabulary named <code>`TUPLE:</code>, <code>`:</code>, and so on.<br /><br />Next, <code>IS</code> and <code>DEFINES</code> desugar as follows.<br /><pre>A'      IS ${T}-array</pre>expands into<br /><pre>A' [ [ I[ ${T}-array]I ] with-string-writer dup search [ ] [ no-word ] ?if ]</pre>and<br /><pre>&lt;A>     DEFINES &lt;${A}></pre>expands into<br /><pre>&lt;A> [ [ I[ &lt;${A}>]I ] with-string-writer create-in ]</pre><br />The <code>I[</code> syntax is just the <code>interpolate</code> library, which turns this,<br /><pre>I[ Hello, ${name}.]I</pre>into this,<br /><pre>"Hello, " write name write "." write</pre>Now,<br /><pre>FUNCTOR: foo ( inputs -- )<br /><br />...names...<br /><br />WHERE<br /><br />...body...<br /><br />;FUNCTOR</pre>is really just syntax sugar for<br /><pre>:: foo ( inputs -- )<br />    [let* | ...names... | ...body... ] ;</pre><br />With the added caveat that inside the body, <code>`:</code> is remapped to <code>:</code> and so on.<br /><br />As you can see, a seemingly powerful feature is melting away as it becomse apparent its only some rather trivial syntax sugar. Words such as <code>`:</code> desugar like so;<br /><pre>`: foo 2 2 + . ;</pre>becomes<br /><pre>foo [ 2 2 + . ] define</pre>Let's look at a functor and its desugaring. Here is a simple functor, it takes a tuple class name as input, and defines a constructor word <code>&lt;foo></code> which makes a new instance of this tuple class using <code>new</code>. So it is like the built-in parsing word <code>C:</code>, except it uses <code>new</code> instead of <code>boa</code>:<br /><pre><font color="#000000">FUNCTOR: make-constructor <font color="#6600cc">( </font><font color="#793b1c"><strong>name</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br /><br />tuple IS $<font color="#006633">{</font>name<font color="#006633">}</font><br />&lt;tuple&gt; DEFINES &lt;$<font color="#006633">{</font>name<font color="#006633">}</font>&gt;<br /><br />WHERE<br /><br /><font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>&lt;tuple&gt;</strong></font> tuple new <font color="#000000"><strong>;</strong></font><br /><br />;FUNCTOR<br /></font></pre><br />Given the above, this functor is really equivalent to the following:<br /><pre><font color="#000000">:<font color="#000000"><strong>:</strong></font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>make-constructor</strong></font> <font color="#6600cc">( </font><font color="#793b1c"><strong>name</strong></font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">--</font><font color="#793b1c"><strong> </strong></font><font color="#6600cc">)</font><br />    <font color="#006633">[</font>let* | tuple <font color="#006633">[</font> name dup search <font color="#006633">[</font> <font color="#006633">]</font> <font color="#006633">[</font> no-word <font color="#006633">]</font> ?if <font color="#006633">]</font><br />            &lt;tuple&gt; <font color="#006633">[</font> <font color="#006633">[</font> <font color="#006666">&quot;</font><font color="#006666">&lt;</font><font color="#006666">&quot;</font> write name write <font color="#006666">&quot;</font><font color="#006666">&gt;</font><font color="#006666">&quot;</font> write <font color="#006633">]</font> with-string-writer <font color="#006633">]</font> |<br />        &lt;tuple&gt; <font color="#006633">[</font> tuple new <font color="#006633">]</font> define<br />    <font color="#006633">]</font> <font color="#000000"><strong>;</strong></font><br /></font></pre><br />We could keep going -- the <code>::</code> word, which defines a word with named parameters, is it self a library word, in the <code>locals</code> vocabulary, which desugars down to stack code.<br /><br />In this simple example, the hand-coded version is shorter than the functor, but the point of using a functor is that you can make the meta-code look like the code that it is generating. For the more complex functors that generate the various forms of specialized arrays, this is invaluable because it makes the code easier to maintain and debug.<br /><br />Finally, the stuff described in this post, especially the implementation of functors, is some pretty advanced stuff. I don't expect most people using Factor to know or care about how this works; after all, you can use specialized arrays without "peeking under the hood", so to speak. However, all of this meta-programming power is there when you are ready for it.
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2008/12/arrays-of-unboxed-primitive-values-and.html' itemprop='url'/>
<a class='timestamp-link' href='arrays-of-unboxed-primitive-values-and.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2008-12-04T11:34:00-05:00'>11:34 AM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=6405874209088924172' onclick=''>
1 comment:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=6405874209088924172' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=6405874209088924172&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=6405874209088924172&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=6405874209088924172&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=6405874209088924172&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=6405874209088924172&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=6405874209088924172&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

          </div></div>
        

          <div class="date-outer">
        
<h2 class='date-header'><span>Monday, December 01, 2008</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='17087850' itemprop='blogId'/>
<meta content='8486995260268389207' itemprop='postId'/>
<a name='8486995260268389207'></a>
<h3 class='post-title entry-title' itemprop='name'>
<a href='factor-now-fully-supported-on-64-bit.html'>Factor now fully supported on 64-bit Windows</a>
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-8486995260268389207' itemprop='description articleBody'>
The 64-bit Windows porting effort is complete. All vocabularies load and all tests pass (except PostgreSQL doesn't have 64-bit client libraries). A <a href="http://factorcode.org/binaries.fhtml">binary package</a> is available. This brings the total number of supported platforms to 13. Enjoy!
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
</span>
<span class='post-timestamp'>
at
<meta content='http://factor-language.blogspot.com/2008/12/factor-now-fully-supported-on-64-bit.html' itemprop='url'/>
<a class='timestamp-link' href='factor-now-fully-supported-on-64-bit.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2008-12-01T19:05:00-05:00'>7:05 PM</abbr></a>
</span>
<span class='post-comment-link'>
<a class='comment-link' href='https://www.blogger.com/comment.g?blogID=17087850&postID=8486995260268389207' onclick=''>
2 comments:
  </a>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=17087850&postID=8486995260268389207' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-561774689'>
<a href='https://www.blogger.com/post-edit.g?blogID=17087850&postID=8486995260268389207&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8486995260268389207&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8486995260268389207&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8486995260268389207&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8486995260268389207&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=17087850&postID=8486995260268389207&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://factor-language.blogspot.com/search?updated-max=2009-02-17T16:03:00-05:00&amp;max-results=7&amp;reverse-paginate=true' id='Blog1_blog-pager-newer-link' title='Newer Posts'>Newer Posts</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://factor-language.blogspot.com/search?updated-max=2008-12-01T19:05:00-05:00&amp;max-results=7' id='Blog1_blog-pager-older-link' title='Older Posts'>Older Posts</a>
</span>
<a class='home-link' href='../../index.html'>Home</a>
</div>
<div class='clear'></div>
<div class='blog-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://factor-language.blogspot.com/feeds/posts/default' target='_blank' type='application/atom+xml'>Posts (Atom)</a>
</div>
</div>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Older Posts</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/index.html'>
2010
</a>
<span class='post-count' dir='ltr'>(18)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2010/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/index.html'>
2009
</a>
<span class='post-count' dir='ltr'>(35)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2009/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='../index.html'>
2008
</a>
<span class='post-count' dir='ltr'>(96)</span>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='index.html'>
December
</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul class='posts'>
<li><a href='discussion-of-concatenative-languages.html'>Discussion of concatenative languages on various b...</a></li>
<li><a href='prevalence-of-shuffle-words-and.html'>Prevalence of shuffle words and dataflow combinators</a></li>
<li><a href='arrays-of-unboxed-primitive-values-and.html'>Arrays of unboxed primitive values, and a faster M...</a></li>
<li><a href='factor-now-fully-supported-on-64-bit.html'>Factor now fully supported on 64-bit Windows</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(17)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/index.html'>
2007
</a>
<span class='post-count' dir='ltr'>(141)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(13)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(10)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(21)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2007/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/index.html'>
2006
</a>
<span class='post-count' dir='ltr'>(207)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(30)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(25)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(22)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/08/index.html'>
August
</a>
<span class='post-count' dir='ltr'>(26)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/07/index.html'>
July
</a>
<span class='post-count' dir='ltr'>(23)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/06/index.html'>
June
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/05/index.html'>
May
</a>
<span class='post-count' dir='ltr'>(15)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/04/index.html'>
April
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/03/index.html'>
March
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/02/index.html'>
February
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2006/01/index.html'>
January
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/index.html'>
2005
</a>
<span class='post-count' dir='ltr'>(23)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/12/index.html'>
December
</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/11/index.html'>
November
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/10/index.html'>
October
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='../../2005/09/index.html'>
September
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Feed' data-version='1' id='Feed2'>
<h2>Recent Factor Commits</h2>
<div class='widget-content' id='Feed2_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://gitweb.factorcode.org/gitweb.cgi?p=factor.git;a=atom'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget Feed' data-version='1' id='Feed1'>
<h2>Planet Factor</h2>
<div class='widget-content' id='Feed1_feedItemListDisplay'>
<span style='filter: alpha(25); opacity: 0.25;'>
<a href='http://planet.factorcode.org/feed.xml'>Loading...</a>
</span>
</div>
<div class='clear'></div>
</div><div class='widget LinkList' data-version='1' id='LinkList1'>
<h2>Links</h2>
<div class='widget-content'>
<ul>
<li><a href='http://twitter.com/slava_pestov'>@slava_pestov</a></li>
<li><a href='http://factorcode.org/slava/'>My home page</a></li>
<li><a href='http://factorcode.org/'>Factor programming language</a></li>
<li><a href='http://concatenative.org/'>Concatenative language wiki</a></li>
<li><a href='http://planet.factorcode.org/'>Planet Factor</a></li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<!-- end content-wrapper -->
<div id='footer-wrapper'>
<div class='footer no-items section' id='footer'></div>
</div>
</div></div>
<!-- end outer-wrapper -->

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/940443484-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY6bKXI6ZLiELLCeSsL--rXlo5k_KA:1693932706752';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d17087850','//factor-language.blogspot.com/2008/12/','17087850');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '17087850', 'title': 'Factor: a practical stack language', 'url': 'http://factor-language.blogspot.com/2008/12/', 'canonicalUrl': 'http://factor-language.blogspot.com/2008/12/', 'homepageUrl': 'http://factor-language.blogspot.com/', 'searchUrl': 'http://factor-language.blogspot.com/search', 'canonicalHomepageUrl': 'http://factor-language.blogspot.com/', 'blogspotFaviconUrl': 'http://factor-language.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en-US', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Factor: a practical stack language - RSS\x22 href\x3d\x22http://factor-language.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Factor: a practical stack language - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/17087850/posts/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/591781cadcbb8744', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'archive', 'pageName': 'December 2008', 'pageTitle': 'Factor: a practical stack language: December 2008'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Factor: a practical stack language', 'description': '\x3ca href\x3d\x22http://factorcode.org/slava\x22\x3eSlava Pestov\x3c/a\x3e\x27s weblog, primarily about \x3ca href\x3d\x22http://factorcode.org\x22\x3eFactor\x3c/a\x3e.', 'url': 'http://factor-language.blogspot.com/2008/12/', 'type': 'feed', 'isSingleItem': false, 'isMultipleItems': true, 'isError': false, 'isPage': false, 'isPost': false, 'isHomepage': false, 'isArchive': true, 'isLabelSearch': false, 'archive': {'year': 2008, 'month': 12, 'rangeMessage': 'Showing posts from December, 2008'}}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1333563935-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/3268905543-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed2', 'sidebar', document.getElementById('Feed2'), {'title': 'Recent Factor Commits', 'showItemDate': true, 'showItemAuthor': true, 'feedUrl': 'http://gitweb.factorcode.org/gitweb.cgi?p\x3dfactor.git;a\x3datom', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FeedView', new _WidgetInfo('Feed1', 'sidebar', document.getElementById('Feed1'), {'title': 'Planet Factor', 'showItemDate': true, 'showItemAuthor': false, 'feedUrl': 'http://planet.factorcode.org/feed.xml', 'numItemsShow': 5, 'loadingMsg': 'Loading...', 'openLinksInNewWindow': false, 'useFeedWidgetServ': 'true'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LinkListView', new _WidgetInfo('LinkList1', 'sidebar', document.getElementById('LinkList1'), {}, 'displayModeFull'));
</script>
</body>
</html>